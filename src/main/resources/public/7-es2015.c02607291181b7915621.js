(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{K1Id:function(e,t,i){"use strict";i.r(t),i.d(t,"TransactionModule",(function(){return vi}));var r=i("ofXK"),o=i("tyNb"),a=i("3Pt+"),n=i("Y7HM"),c=i("ro1u"),l=i("fXoL"),d=i("tk/3");let s=(()=>{class e{constructor(e){this.http=e}save(e){return this.http.post("transaction/order",e)}findAll(){return this.http.get("transaction/orders")}findById(e){return this.http.get("transaction/orders/find",{params:{id:e}})}delete(e){return this.http.delete("transaction/orders/delete",{params:{id:e}})}deleteDetail(e,t){let i=new d.d;return i=i.append("id",e),i=i.append("detailId",t.toString()),this.http.delete("transaction/orders/detail/delete",{params:i})}downloadInvoice(e){this.http.get("transaction/orders/invoice",{responseType:"blob",params:{id:e}}).subscribe(e=>this.downloadFile(e),e=>console.log("Error downloading the file."))}downloadFile(e){new Blob([e],{type:"application/pdf"});const t=window.URL.createObjectURL(e);let i=window.open(t);i&&!i.closed&&void 0!==i.closed||alert("Please disable your Pop-up blocker and try again.")}}return e.\u0275fac=function(t){return new(t||e)(l.bc(d.b))},e.\u0275prov=l.Nb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var b=i("zYZu"),u=i("+hj4"),m=i("Deg8"),p=i("Ce0u"),h=i("ShJT"),f=i("0IaG"),g=i("NFeN"),v=i("kmnG"),W=i("qFsG"),X=i("d3UM"),I=i("iadO"),y=i("dbUT"),C=i("FKr1");function D(e,t){if(1&e&&(l.Xb(0,"div"),l.Xb(1,"p",6),l.Hc(2),l.Wb(),l.Wb()),2&e){const e=l.ic();l.Cb(2),l.Jc("Order Id : ",e.orderId,"")}}function S(e,t){1&e&&(l.Xb(0,"div"),l.Xb(1,"p",40),l.Hc(2,"Enter order placement details for raw materials"),l.Wb(),l.Wb())}function w(e,t){if(1&e&&(l.Xb(0,"mat-option",70),l.Hc(1),l.Wb()),2&e){const e=t.$implicit;l.oc("value",e.projectId),l.Cb(1),l.Kc(" ",e.projectId," | ",e.description," ")}}function M(e,t){1&e&&(l.Xb(0,"mat-error"),l.Hc(1,"Project is required"),l.Wb())}function H(e,t){if(1&e&&(l.Xb(0,"mat-option",70),l.Hc(1),l.Wb()),2&e){const e=t.$implicit;l.oc("value",e.clientId),l.Cb(1),l.Jc(" ",e.clientName," ")}}function F(e,t){1&e&&(l.Xb(0,"mat-error"),l.Hc(1,"Supplier is required"),l.Wb())}function N(e,t){if(1&e&&(l.Xb(0,"mat-option",70),l.Hc(1),l.Wb()),2&e){const e=t.$implicit;l.oc("value",e.detailId),l.Cb(1),l.Jc(" ",e.identifier," ")}}function x(e,t){if(1&e&&(l.Xb(0,"mat-option",70),l.Hc(1),l.Wb()),2&e){const e=t.$implicit;l.oc("value",e.value),l.Cb(1),l.Jc(" ",e.viewValue," ")}}function k(e,t){1&e&&(l.Xb(0,"mat-error"),l.Hc(1,"Order date is required"),l.Wb())}function A(e,t){1&e&&(l.Xb(0,"mat-error"),l.Hc(1,"Expected delivary date is required"),l.Wb())}function j(e,t){if(1&e&&(l.Xb(0,"mat-option",70),l.Hc(1),l.Wb()),2&e){const e=t.$implicit;l.oc("value",e.value),l.Cb(1),l.Jc(" ",e.viewValue," ")}}function q(e,t){if(1&e&&(l.Xb(0,"mat-option",70),l.Hc(1),l.Wb()),2&e){const e=t.$implicit;l.oc("value",e.value),l.Cb(1),l.Jc(" ",e.viewValue," ")}}function P(e,t){1&e&&(l.Xb(0,"mat-error"),l.Hc(1,"Payment terms is required"),l.Wb())}function O(e,t){if(1&e){const e=l.Yb();l.Xb(0,"tbody"),l.Xb(1,"tr"),l.Xb(2,"td"),l.Hc(3),l.Wb(),l.Xb(4,"td"),l.Hc(5),l.Wb(),l.Xb(6,"td"),l.Hc(7),l.Wb(),l.Xb(8,"td"),l.Hc(9),l.Wb(),l.Xb(10,"td"),l.Hc(11),l.Wb(),l.Xb(12,"td"),l.Xb(13,"a",71),l.fc("click",(function(){l.Ac(e);const i=t.$implicit,r=l.ic(),o=l.xc(107);return r.editDetail(i,o)})),l.Xb(14,"mat-icon",72),l.Hc(15,"edit"),l.Wb(),l.Wb(),l.Xb(16,"a",73),l.fc("click",(function(){l.Ac(e);const i=t.$implicit;return l.ic().openDialog(i)})),l.Xb(17,"mat-icon",72),l.Hc(18,"delete"),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb()}if(2&e){const e=t.$implicit;l.Cb(3),l.Ic(e.rmName),l.Cb(2),l.Ic(e.quantity),l.Cb(2),l.Ic(e.unitId),l.Cb(2),l.Ic(e.rate),l.Cb(2),l.Ic(e.amount)}}function G(e,t){if(1&e){const e=l.Yb();l.Xb(0,"mat-option",74),l.fc("onSelectionChange",(function(){l.Ac(e);const i=t.$implicit;return l.ic().populateUnit(i)})),l.Hc(1),l.Wb()}if(2&e){const e=t.$implicit;l.oc("value",e.code),l.Cb(1),l.Jc(" ",e.name," ")}}function E(e,t){1&e&&(l.Xb(0,"mat-error"),l.Hc(1,"Raw material is required"),l.Wb())}function R(e,t){1&e&&(l.Xb(0,"mat-error"),l.Hc(1,"Unit is required"),l.Wb())}function T(e,t){1&e&&(l.Xb(0,"mat-error"),l.Hc(1,"Quantity is required"),l.Wb())}function U(e,t){1&e&&(l.Xb(0,"mat-error"),l.Hc(1,"Rate is required "),l.Wb())}function B(e,t){1&e&&(l.Xb(0,"mat-error"),l.Hc(1,"Amount is required "),l.Wb())}let Q=(()=>{class e{constructor(e,t,i,r,o,a,n,c,l){this.orderPlacementService=e,this.notificationService=t,this.rawMaterialService=i,this.clientService=r,this.projectService=o,this.unitService=a,this.dialog=n,this.route=c,this.datePipe=l,this.details=[],this.displayedColumns=["rmId","quantity","unitId"],this.rawMaterials=[],this.suppliers=[],this.projects=[],this.units=[],this.supplierDetails=[],this.statusValues=[{value:"draft",viewValue:"Draft"},{value:"in_progress",viewValue:"In Progress"},{value:"submit",viewValue:"Submit"}],this.workUnits=[{value:"DUMDUM",viewValue:"Dum dum unit"},{value:"SINGUR",viewValue:"Singur Unit"}],this.freightCharges=[{value:"Inclusive",viewValue:"Inclusive"},{value:"Exclisive",viewValue:"Exclisive"}],this.hasError=(e,t)=>this.opForm.controls[e].hasError(t),this.hasDetailError=(e,t)=>this.opDetailForm.controls[e].hasError(t)}ngOnInit(){this.getRawMaterials(),this.getSuppliers(),this.getProjects(),this.getUnits(),this.opForm=new a.e({orderId:new a.c(""),supplierId:new a.c(""),supplierDetailsId:new a.c(""),expectedDeliveryDate:new a.c(null,a.o.required),status:new a.c("",a.o.required),notes:new a.c(""),projectId:new a.c("",a.o.required),description:new a.c(""),identifier:new a.c(""),siteId:new a.c("",a.o.required),details:new a.c(""),expectedDeliveryDateString:new a.c(""),isActive:new a.c(""),supplierName:new a.c(""),orderDate:new a.c(new Date,a.o.required),orderDateString:new a.c(""),freightChargeType:new a.c(""),paymentTerms:new a.c("Against Delivery else @ 18% interest from the date of delivery",a.o.required)}),this.opDetailForm=new a.e({orderId:new a.c(""),orderDetailsId:new a.c(""),rmId:new a.c("",a.o.required),rmName:new a.c(""),unitId:new a.c(""),unitName:new a.c("",a.o.required),quantity:new a.c(0,a.o.required),rate:new a.c(0,a.o.required),amount:new a.c(0,a.o.required),alreadyOrderedQuantity:new a.c(null),remainingQuantity:new a.c(null)}),this.route.queryParams.subscribe(e=>{Object.keys(e).length>0&&this.orderPlacementService.findById(e.id).subscribe(e=>{this.details=e.details,e.expectedDeliveryDate=this.convertToDate(e.expectedDeliveryDateString),e.orderDate=this.convertToDate(e.orderDateString),this.filterSupplierDateils(e.supplierId),this.opForm.setValue(e),this.orderId=e.orderId})})}convertToDate(e){let t=null;return null!=e&&e.length>0&&(t=new Date(e)),t}onSubmit(){this.opForm.valid&&(this.orderPlacement=this.opForm.value,this.orderPlacement.details=this.details,null!=this.opForm.value.isActive&&""!=this.opForm.value.isActive||(this.orderPlacement.isActive=!0),this.orderPlacement.expectedDeliveryDateString=this.datePipe.transform(this.orderPlacement.expectedDeliveryDate,"dd/MM/yyyy"),this.orderPlacement.orderDateString=this.datePipe.transform(this.orderPlacement.orderDate,"dd/MM/yyyy"),this.orderPlacementService.save(this.orderPlacement).subscribe(e=>{this.notificationService.openSnackBar(e.message,e.status),console.log("success response ::"),console.log(e),this.opForm.reset(),this.details=[]},e=>{this.notificationService.openSnackBar(e.error.message,e.error.status),console.log("error response ::"),console.log(e.message)}))}onDetailSubmit(e){if(this.opDetailForm.valid){let t=this.opDetailForm.value,i=t.orderId,r=-1;r=this.details.findIndex(null!=i&&i.length>0?e=>e.orderId==i:e=>e.rmId==t.rmId),console.log("last index >>"+r),-1!=r?(this.details[r]=this.opDetailForm.value,this.notificationService.openSnackBar("Log updated successfully","success")):(this.details.push(this.opDetailForm.value),this.notificationService.openSnackBar("Log added successfully","success")),this.opDetailForm.reset(),e.hide()}else this.notificationService.openSnackBar("Error occurred, please review and submit again","danger")}getRawMaterials(){this.rawMaterialService.findAllRawMaterials().subscribe(e=>{this.rawMaterials=e})}getSuppliers(){this.clientService.findAll().subscribe(e=>{this.suppliers=e})}getProjects(){this.projectService.findAll().subscribe(e=>{this.projects=e})}getUnits(){this.unitService.getAllUnits().subscribe(e=>{this.units=e})}close(e){e.hide()}populateUnit(e){this.rmName=e.name,this.unitId=e.unit.unitId,this.unitName=e.unit.unitName}editDetail(e,t){this.opDetailForm.setValue(e),t.show()}openDialog(e){this.dialog.open(c.a,{width:"250px",data:{header:"Confirm",content:"Are you sure to delete?"}}).afterClosed().subscribe(t=>{t&&this.deleteDetail(e)})}deleteDetail(e){let t=this.calculateDetailIndex(e);e.orderId?this.orderPlacementService.deleteDetail(e.orderId,e.orderDetailsId).subscribe(e=>{this.details.splice(t,1),this.notificationService.openSnackBar(e.message,e.status)},e=>{this.notificationService.openSnackBar(e.error.message,e.error.status),console.log("error response ::"),console.log(e.message)}):-1!==t&&(this.details.splice(t,1),this.notificationService.openSnackBar("Order details removed successfully","success"))}calculateDetailIndex(e){let t=-1;return t=this.details.findIndex(null!=e.orderId&&e.orderId.length>0?t=>t.orderId==e.orderId:t=>t.rmId==e.rmId),t}populateSupplierDetails(e){this.filterSupplierDateils(e.value)}filterSupplierDateils(e){this.supplierDetails=this.suppliers.filter(t=>t.clientId===e)[0].details}calculateDetail(){let e=this.opDetailForm.value.quantity,t=this.opDetailForm.value.rate;Object(n.a)(e)&&Object(n.a)(t)&&(this.detailAmount=(Number.parseFloat(t.toString())*Number.parseFloat(e.toString())).toFixed(2))}isMobileMenu(){return!($(window).width()>991)}modalWIdth(){return this.isMobileMenu()?"100%":"150%"}}return e.\u0275fac=function(t){return new(t||e)(l.Rb(s),l.Rb(b.a),l.Rb(u.a),l.Rb(m.a),l.Rb(p.a),l.Rb(h.a),l.Rb(f.b),l.Rb(o.a),l.Rb(r.d))},e.\u0275cmp=l.Lb({type:e,selectors:[["app-order-placement"]],decls:152,vars:35,consts:[[1,"main-content"],[1,"container-fluid"],[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-header","card-header-success"],[1,"card-title"],["routerLink","/transaction/orders"],["alt","Show All",1,"gridIcon"],[4,"ngIf"],[1,"card-body"],[3,"formGroup","ngSubmit"],["headerForm","ngForm"],[1,"col-md-3"],[1,"invisible","example-full-width"],["matInput","","placeholder","orderId","formControlName","orderId"],["matInput","","placeholder","isActive","formControlName","isActive"],[1,"example-full-width"],["placeholder","Project","formControlName","projectId"],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-2"],["placeholder","Supplier","formControlName","supplierId",3,"selectionChange"],["placeholder","Supplier Address","formControlName","supplierDetailsId"],["placeholder","Work Unit","formControlName","siteId"],["matInput","","formControlName","orderDate",3,"matDatepicker"],["matSuffix","",3,"for"],["picker3",""],["matInput","","formControlName","expectedDeliveryDate",3,"matDatepicker"],["picker1",""],["placeholder","Status","formControlName","status"],["placeholder","Freight Charges","formControlName","freightChargeType"],[1,"col-md-6"],["matInput","","placeholder","Payment Terms","formControlName","paymentTerms"],["matInput","","placeholder","Notes","formControlName","notes"],[1,"card","card-plain"],[1,"card-header","card-header-info"],["width","100%"],["width","90%"],[2,"align-content","justify-content-right"],["type","button","mdbBtn","","color","unique","rounded","true","data-toggle","modal","data-target","#basicExample","mdbWavesEffect","",3,"click"],[1,"card-category"],[1,"table-responsive"],[1,"table","table-hover"],[1,"text-primary"],[4,"ngFor","ngForOf"],["mat-raised-button","","type","submit",1,"btn","btn-success","pull-right",3,"disabled","click"],[1,"clearfix"],["mdbModal","","id","frameModalTop","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade","left"],["frame","mdbModal"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header","text-center"],[1,"modal-title","w-100","font-weight-bold"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[3,"formGroup"],[1,"col-md-4"],["matInput","","placeholder","orderDetailsId","formControlName","orderDetailsId"],["matInput","","placeholder","alreadyOrderedQuantity","formControlName","alreadyOrderedQuantity"],["matInput","","placeholder","remainingQuantity","formControlName","remainingQuantity"],["matInput","","formControlName","rmName",3,"ngModel","ngModelChange"],["placeholder","Raw Material","formControlName","rmId"],[3,"value","onSelectionChange",4,"ngFor","ngForOf"],["matInput","","placeholder","Unit","formControlName","unitId",3,"ngModel","ngModelChange"],["matInput","","placeholder","Unit","formControlName","unitName",3,"readonly","ngModel","ngModelChange"],["matInput","","placeholder","Quantity","formControlName","quantity",3,"change"],["matInput","","placeholder","Rate","formControlName","rate",2,"text-align","right",3,"change"],["matInput","","placeholder","Amount","formControlName","amount",2,"text-align","right",3,"readonly","ngModel","ngModelChange"],[1,"modal-footer","d-flex","justify-content-right"],["mdbBtn","","color","deep-orange","mdbWavesEffect","",1,"waves-light",3,"click"],[3,"value"],["title","","data-toggle","tooltip","data-original-title","Edit",1,"edit",2,"cursor","pointer",3,"click"],[1,"routeIcon"],["title","","data-toggle","tooltip","data-original-title","Delete",1,"delete",2,"cursor","pointer",3,"click"],[3,"value","onSelectionChange"]],template:function(e,t){if(1&e){const e=l.Yb();l.Xb(0,"div",0),l.Xb(1,"div",1),l.Xb(2,"div",2),l.Xb(3,"div",3),l.Xb(4,"div",4),l.Xb(5,"div",5),l.Xb(6,"h4",6),l.Hc(7,"Raw material order placement "),l.Xb(8,"a",7),l.Xb(9,"mat-icon",8),l.Hc(10,"web"),l.Wb(),l.Wb(),l.Wb(),l.Gc(11,D,3,1,"div",9),l.Gc(12,S,3,0,"div",9),l.Wb(),l.Xb(13,"div",10),l.Xb(14,"form",11,12),l.fc("ngSubmit",(function(){return t.onSubmit()})),l.Xb(16,"div",2),l.Xb(17,"div",13),l.Xb(18,"mat-form-field",14),l.Sb(19,"input",15),l.Sb(20,"input",16),l.Wb(),l.Xb(21,"mat-form-field",17),l.Xb(22,"mat-select",18),l.Gc(23,w,2,3,"mat-option",19),l.Wb(),l.Gc(24,M,2,0,"mat-error",9),l.Wb(),l.Wb(),l.Xb(25,"div",20),l.Xb(26,"mat-form-field",17),l.Xb(27,"mat-select",21),l.fc("selectionChange",(function(e){return t.populateSupplierDetails(e)})),l.Gc(28,H,2,2,"mat-option",19),l.Wb(),l.Gc(29,F,2,0,"mat-error",9),l.Wb(),l.Wb(),l.Xb(30,"div",13),l.Xb(31,"mat-form-field",17),l.Xb(32,"mat-select",22),l.Gc(33,N,2,2,"mat-option",19),l.Wb(),l.Wb(),l.Wb(),l.Xb(34,"div",20),l.Xb(35,"mat-form-field",17),l.Xb(36,"mat-select",23),l.Gc(37,x,2,2,"mat-option",19),l.Wb(),l.Wb(),l.Wb(),l.Xb(38,"div",20),l.Xb(39,"mat-form-field"),l.Xb(40,"mat-label"),l.Hc(41,"Order Date"),l.Wb(),l.Sb(42,"input",24),l.Sb(43,"mat-datepicker-toggle",25),l.Sb(44,"mat-datepicker",null,26),l.Gc(46,k,2,0,"mat-error",9),l.Wb(),l.Wb(),l.Wb(),l.Xb(47,"div",2),l.Xb(48,"div",20),l.Xb(49,"mat-form-field"),l.Xb(50,"mat-label"),l.Hc(51,"Expected Delivary Date"),l.Wb(),l.Sb(52,"input",27),l.Sb(53,"mat-datepicker-toggle",25),l.Sb(54,"mat-datepicker",null,28),l.Gc(56,A,2,0,"mat-error",9),l.Wb(),l.Wb(),l.Xb(57,"div",20),l.Xb(58,"mat-form-field",17),l.Xb(59,"mat-select",29),l.Gc(60,j,2,2,"mat-option",19),l.Wb(),l.Wb(),l.Wb(),l.Xb(61,"div",20),l.Xb(62,"mat-form-field",17),l.Xb(63,"mat-select",30),l.Gc(64,q,2,2,"mat-option",19),l.Wb(),l.Wb(),l.Wb(),l.Xb(65,"div",31),l.Xb(66,"mat-form-field",17),l.Sb(67,"input",32),l.Gc(68,P,2,0,"mat-error",9),l.Wb(),l.Wb(),l.Wb(),l.Xb(69,"div",2),l.Xb(70,"div",3),l.Xb(71,"mat-form-field",17),l.Sb(72,"input",33),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Xb(73,"div",2),l.Xb(74,"div",3),l.Xb(75,"div",34),l.Xb(76,"div",35),l.Xb(77,"table",36),l.Xb(78,"tr"),l.Xb(79,"td",37),l.Xb(80,"h4",6),l.Hc(81,"Order Placement Dteails"),l.Wb(),l.Wb(),l.Xb(82,"td",38),l.Xb(83,"button",39),l.fc("click",(function(){return l.Ac(e),l.xc(107).show()})),l.Hc(84," Add "),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Sb(85,"p",40),l.Wb(),l.Xb(86,"div",10),l.Xb(87,"div",41),l.Xb(88,"table",42),l.Xb(89,"thead",43),l.Xb(90,"th"),l.Hc(91,"Raw Material"),l.Wb(),l.Xb(92,"th"),l.Hc(93,"Quantity"),l.Wb(),l.Xb(94,"th"),l.Hc(95,"Unit"),l.Wb(),l.Xb(96,"th"),l.Hc(97,"Rate"),l.Wb(),l.Xb(98,"th"),l.Hc(99,"Amount"),l.Wb(),l.Xb(100,"th"),l.Hc(101,"Action"),l.Wb(),l.Wb(),l.Gc(102,O,19,5,"tbody",44),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Xb(103,"button",45),l.fc("click",(function(){return l.Ac(e),l.xc(15).ngSubmit.emit()})),l.Hc(104,"Save"),l.Wb(),l.Sb(105,"div",46),l.Xb(106,"div",47,48),l.Xb(108,"div",49),l.Xb(109,"div",50),l.Xb(110,"div",51),l.Xb(111,"h4",52),l.Hc(112,"Order Placement Details"),l.Wb(),l.Xb(113,"button",53),l.fc("click",(function(){l.Ac(e);const i=l.xc(107);return t.close(i)})),l.Xb(114,"span",54),l.Hc(115,"\xd7"),l.Wb(),l.Wb(),l.Wb(),l.Xb(116,"div",10),l.Xb(117,"form",55),l.Xb(118,"div",2),l.Xb(119,"div",56),l.Xb(120,"mat-form-field",14),l.Sb(121,"input",15),l.Sb(122,"input",57),l.Sb(123,"input",58),l.Sb(124,"input",59),l.Wb(),l.Xb(125,"mat-form-field",14),l.Xb(126,"input",60),l.fc("ngModelChange",(function(e){return t.rmName=e})),l.Wb(),l.Wb(),l.Xb(127,"mat-form-field",17),l.Xb(128,"mat-select",61),l.Gc(129,G,2,2,"mat-option",62),l.Wb(),l.Gc(130,E,2,0,"mat-error",9),l.Wb(),l.Wb(),l.Xb(131,"div",20),l.Xb(132,"mat-form-field",14),l.Xb(133,"input",63),l.fc("ngModelChange",(function(e){return t.unitId=e})),l.Wb(),l.Wb(),l.Xb(134,"mat-form-field",17),l.Xb(135,"input",64),l.fc("ngModelChange",(function(e){return t.unitName=e})),l.Wb(),l.Gc(136,R,2,0,"mat-error",9),l.Wb(),l.Wb(),l.Xb(137,"div",20),l.Xb(138,"mat-form-field",17),l.Xb(139,"input",65),l.fc("change",(function(){return t.calculateDetail()})),l.Wb(),l.Gc(140,T,2,0,"mat-error",9),l.Wb(),l.Wb(),l.Xb(141,"div",20),l.Xb(142,"mat-form-field",17),l.Xb(143,"input",66),l.fc("change",(function(){return t.calculateDetail()})),l.Wb(),l.Gc(144,U,2,0,"mat-error",9),l.Wb(),l.Wb(),l.Xb(145,"div",20),l.Xb(146,"mat-form-field",17),l.Xb(147,"input",67),l.fc("ngModelChange",(function(e){return t.detailAmount=e})),l.Wb(),l.Gc(148,B,2,0,"mat-error",9),l.Wb(),l.Wb(),l.Wb(),l.Xb(149,"div",68),l.Xb(150,"button",69),l.fc("click",(function(){l.Ac(e);const i=l.xc(107);return t.onDetailSubmit(i)})),l.Hc(151,"Save"),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb()}if(2&e){const e=l.xc(15),i=l.xc(45),r=l.xc(55);l.Cb(11),l.oc("ngIf",t.orderId),l.Cb(1),l.oc("ngIf",!t.orderId),l.Cb(2),l.oc("formGroup",t.opForm),l.Cb(9),l.oc("ngForOf",t.projects),l.Cb(1),l.oc("ngIf",t.hasError("projectId","required")),l.Cb(4),l.oc("ngForOf",t.suppliers),l.Cb(1),l.oc("ngIf",t.hasError("supplierId","required")),l.Cb(4),l.oc("ngForOf",t.supplierDetails),l.Cb(4),l.oc("ngForOf",t.workUnits),l.Cb(5),l.oc("matDatepicker",i),l.Cb(1),l.oc("for",i),l.Cb(3),l.oc("ngIf",t.hasError("expectedDeliveryDate","required")),l.Cb(6),l.oc("matDatepicker",r),l.Cb(1),l.oc("for",r),l.Cb(3),l.oc("ngIf",t.hasError("expectedDeliveryDate","required")),l.Cb(4),l.oc("ngForOf",t.statusValues),l.Cb(4),l.oc("ngForOf",t.freightCharges),l.Cb(4),l.oc("ngIf",t.hasError("paymentTerms","required")),l.Cb(34),l.oc("ngForOf",t.details),l.Cb(1),l.oc("disabled",!e.form.valid),l.Cb(6),l.Fc("width",t.modalWIdth()),l.Cb(8),l.oc("formGroup",t.opDetailForm),l.Cb(9),l.oc("ngModel",t.rmName),l.Cb(3),l.oc("ngForOf",t.rawMaterials),l.Cb(1),l.oc("ngIf",t.hasDetailError("rmId","required")),l.Cb(3),l.oc("ngModel",t.unitId),l.Cb(2),l.oc("readonly",!0)("ngModel",t.unitName),l.Cb(1),l.oc("ngIf",t.hasDetailError("unitName","required")),l.Cb(4),l.oc("ngIf",t.hasDetailError("quantity","required")),l.Cb(4),l.oc("ngIf",t.hasDetailError("rate","required")),l.Cb(3),l.oc("readonly",!0)("ngModel",t.detailAmount),l.Cb(1),l.oc("ngIf",t.hasDetailError("amount","required"))}},directives:[o.e,g.a,r.l,a.p,a.l,a.f,v.c,W.b,a.a,a.k,a.d,X.a,r.k,v.f,I.b,I.d,v.g,I.a,y.b,y.c,C.l,v.b],styles:[""]}),e})();function L(e,t){1&e&&(l.Xb(0,"th"),l.Hc(1,"Estimated delivery date"),l.Wb())}function V(e,t){1&e&&(l.Xb(0,"th"),l.Hc(1,"Status"),l.Wb())}function J(e,t){if(1&e&&(l.Xb(0,"td"),l.Hc(1),l.Wb()),2&e){const e=l.ic().$implicit;l.Cb(1),l.Ic(e.expectedDeliveryDateString)}}function Y(e,t){if(1&e&&(l.Xb(0,"td"),l.Hc(1),l.Wb()),2&e){const e=l.ic().$implicit;l.Cb(1),l.Ic(e.status)}}const K=function(){return["/transaction/orders/edit"]},_=function(e){return{id:e}};function z(e,t){if(1&e){const e=l.Yb();l.Xb(0,"tbody"),l.Xb(1,"tr"),l.Xb(2,"td"),l.Hc(3),l.Wb(),l.Xb(4,"td"),l.Hc(5),l.Wb(),l.Xb(6,"td"),l.Hc(7),l.Wb(),l.Gc(8,J,2,1,"td",14),l.Gc(9,Y,2,1,"td",14),l.Xb(10,"td"),l.Xb(11,"a",16),l.fc("click",(function(){l.Ac(e);const i=t.$implicit;return l.ic().downloadInvoice(i.orderId)})),l.Xb(12,"mat-icon",17),l.Hc(13,"save_alt"),l.Wb(),l.Wb(),l.Xb(14,"a",18),l.Xb(15,"mat-icon",17),l.Hc(16,"edit"),l.Wb(),l.Wb(),l.Xb(17,"a",19),l.fc("click",(function(){l.Ac(e);const i=t.$implicit;return l.ic().openDialog(i)})),l.Xb(18,"mat-icon",17),l.Hc(19,"delete"),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb()}if(2&e){const e=t.$implicit,i=l.ic();l.Cb(3),l.Ic(e.orderId),l.Cb(2),l.Ic(e.projectId),l.Cb(2),l.Ic(e.supplierName),l.Cb(1),l.oc("ngIf",!i.isMobileMenu()),l.Cb(1),l.oc("ngIf",!i.isMobileMenu()),l.Cb(5),l.oc("routerLink",l.qc(7,K))("queryParams",l.rc(8,_,e.orderId))}}let Z=(()=>{class e{constructor(e,t,i){this.orderPlacementService=e,this.notificationService=t,this.dialog=i,this.orders=[]}ngOnInit(){this.findAll()}findAll(){this.orderPlacementService.findAll().subscribe(e=>{this.orders=e})}delete(e){this.orderPlacementService.delete(e.orderId).subscribe(e=>{console.log("Delete Response >>>>"),console.log(e),this.notificationService.openSnackBar(e.message,e.status),this.findAll()})}openDialog(e){this.dialog.open(c.a,{width:"250px",data:{header:"Confirm",content:"Are you sure to delete?"}}).afterClosed().subscribe(t=>{t&&this.delete(e)})}isMobileMenu(){return!($(window).width()>991)}downloadInvoice(e){this.orderPlacementService.downloadInvoice(e)}downloadFile(e){const t=window.URL.createObjectURL(e);let i=window.open(t);i&&!i.closed&&void 0!==i.closed||alert("Please disable your Pop-up blocker and try again.")}}return e.\u0275fac=function(t){return new(t||e)(l.Rb(s),l.Rb(b.a),l.Rb(f.b))},e.\u0275cmp=l.Lb({type:e,selectors:[["app-order-placement-show"]],decls:27,vars:3,consts:[[1,"main-content"],[1,"container-fluid"],[1,"row"],[1,"col-md-12"],[1,"card","card-plain"],[1,"card-header","card-header-info"],[1,"card-title"],["routerLink","/transaction/order-placement/add"],["alt","Add",1,"gridIcon"],[1,"card-category"],[1,"card-body"],[1,"table-responsive"],[1,"table","table-hover"],[1,"text-primary"],[4,"ngIf"],[4,"ngFor","ngForOf"],["title","","data-toggle","tooltip","data-original-title","Download",1,"download",2,"cursor","pointer",3,"click"],[1,"routeIcon"],["title","","data-toggle","tooltip","data-original-title","Edit",1,"edit",3,"routerLink","queryParams"],["title","","data-toggle","tooltip","data-original-title","Delete",1,"delete",2,"cursor","pointer",3,"click"]],template:function(e,t){1&e&&(l.Xb(0,"div",0),l.Xb(1,"div",1),l.Xb(2,"div",2),l.Xb(3,"div",3),l.Xb(4,"div",4),l.Xb(5,"div",5),l.Xb(6,"h4",6),l.Hc(7,"Order placement details "),l.Xb(8,"a",7),l.Xb(9,"mat-icon",8),l.Hc(10,"add"),l.Wb(),l.Wb(),l.Wb(),l.Sb(11,"p",9),l.Wb(),l.Xb(12,"div",10),l.Xb(13,"div",11),l.Xb(14,"table",12),l.Xb(15,"thead",13),l.Xb(16,"th"),l.Hc(17,"Order Code"),l.Wb(),l.Xb(18,"th"),l.Hc(19,"Project"),l.Wb(),l.Xb(20,"th"),l.Hc(21,"Supplier"),l.Wb(),l.Gc(22,L,2,0,"th",14),l.Gc(23,V,2,0,"th",14),l.Xb(24,"th"),l.Hc(25,"Action"),l.Wb(),l.Wb(),l.Gc(26,z,20,10,"tbody",15),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb()),2&e&&(l.Cb(22),l.oc("ngIf",!t.isMobileMenu()),l.Cb(1),l.oc("ngIf",!t.isMobileMenu()),l.Cb(3),l.oc("ngForOf",t.orders))},directives:[o.e,g.a,r.l,r.k],styles:[""]}),e})();function ee(e,t){if(1&e&&(l.Xb(0,"div"),l.Xb(1,"p",6),l.Hc(2),l.Wb(),l.Wb()),2&e){const e=l.ic();l.Cb(2),l.Jc("Project Id : ",e.projectId,"")}}function te(e,t){1&e&&(l.Xb(0,"div"),l.Xb(1,"p",48),l.Hc(2,"Enter project data"),l.Wb(),l.Wb())}function ie(e,t){1&e&&(l.Xb(0,"mat-error"),l.Hc(1,"project Name is required"),l.Wb())}function re(e,t){if(1&e&&(l.Xb(0,"mat-option",75),l.Hc(1),l.Wb()),2&e){const e=t.$implicit;l.oc("value",e.clientId),l.Cb(1),l.Jc(" ",e.clientName," ")}}function oe(e,t){1&e&&(l.Xb(0,"mat-error"),l.Hc(1,"Customer is required "),l.Wb())}function ae(e,t){if(1&e&&(l.Xb(0,"mat-option",75),l.Hc(1),l.Wb()),2&e){const e=t.$implicit;l.oc("value",e.clientId),l.Cb(1),l.Jc(" ",e.clientName," ")}}function ne(e,t){1&e&&(l.Xb(0,"mat-error"),l.Hc(1,"Purchase Order No is required"),l.Wb())}function ce(e,t){if(1&e&&(l.Xb(0,"mat-option",75),l.Hc(1),l.Wb()),2&e){const e=t.$implicit;l.oc("value",e.value),l.Cb(1),l.Jc(" ",e.viewValue," ")}}function le(e,t){1&e&&(l.Xb(0,"mat-error"),l.Hc(1,"Amount is required "),l.Wb())}function de(e,t){1&e&&(l.Xb(0,"th"),l.Hc(1,"Rate"),l.Wb())}function se(e,t){1&e&&(l.Xb(0,"th"),l.Hc(1,"Amount"),l.Wb())}function be(e,t){if(1&e&&(l.Xb(0,"td"),l.Hc(1),l.Wb()),2&e){const e=l.ic().$implicit;l.Cb(1),l.Ic(e.rate)}}function ue(e,t){if(1&e&&(l.Xb(0,"td"),l.Hc(1),l.Wb()),2&e){const e=l.ic().$implicit;l.Cb(1),l.Ic(e.amount)}}function me(e,t){if(1&e){const e=l.Yb();l.Xb(0,"tbody"),l.Xb(1,"tr"),l.Xb(2,"td"),l.Hc(3),l.Wb(),l.Xb(4,"td"),l.Hc(5),l.Wb(),l.Xb(6,"td"),l.Hc(7),l.Wb(),l.Gc(8,be,2,1,"td",9),l.Gc(9,ue,2,1,"td",9),l.Xb(10,"td"),l.Xb(11,"a",76),l.fc("click",(function(){l.Ac(e);const i=t.$implicit,r=l.ic(),o=l.xc(128);return r.editDetail(i,o)})),l.Xb(12,"mat-icon",77),l.Hc(13,"edit"),l.Wb(),l.Wb(),l.Xb(14,"a",78),l.fc("click",(function(){l.Ac(e);const i=t.$implicit;return l.ic().openDialog(i)})),l.Xb(15,"mat-icon",77),l.Hc(16,"delete"),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb()}if(2&e){const e=t.$implicit,i=l.ic();l.Cb(3),l.Ic(e.rmName),l.Cb(2),l.Ic(e.quantity),l.Cb(2),l.Ic(e.unitId),l.Cb(1),l.oc("ngIf",!i.isMobileMenu()),l.Cb(1),l.oc("ngIf",!i.isMobileMenu())}}function pe(e,t){if(1&e){const e=l.Yb();l.Xb(0,"mat-option",79),l.fc("onSelectionChange",(function(){l.Ac(e);const i=t.$implicit;return l.ic().populateUnit(i)})),l.Hc(1),l.Wb()}if(2&e){const e=t.$implicit;l.oc("value",e.code),l.Cb(1),l.Jc(" ",e.name," ")}}function he(e,t){1&e&&(l.Xb(0,"mat-error"),l.Hc(1,"Raw material is required "),l.Wb())}function fe(e,t){1&e&&(l.Xb(0,"mat-error"),l.Hc(1,"Unit is required "),l.Wb())}function ge(e,t){1&e&&(l.Xb(0,"mat-error"),l.Hc(1,"Quantity is required "),l.Wb())}function ve(e,t){1&e&&(l.Xb(0,"mat-error"),l.Hc(1,"Rate is required "),l.Wb())}function We(e,t){1&e&&(l.Xb(0,"mat-error"),l.Hc(1,"Amount is required "),l.Wb())}let Xe=(()=>{class e{constructor(e,t,i,r,o,a,n,c){this.projectService=e,this.notificationService=t,this.rawMaterialService=i,this.clientService=r,this.unitService=o,this.dialog=a,this.route=n,this.datePipe=c,this.details=[],this.rawMaterials=[],this.customers=[],this.consignees=[],this.units=[],this.statusValues=[{value:"new",viewValue:"New"},{value:"running",viewValue:"On Going"},{value:"complete",viewValue:"Completed"}],this.hasError=(e,t)=>this.projectForm.controls[e].hasError(t),this.hasDetailError=(e,t)=>this.projectDetailForm.controls[e].hasError(t)}ngOnInit(){this.getCustomers(),this.getConsignees(),this.findAllProducts(),this.projectForm=new a.e({projectId:new a.c(""),amendmentNo:new a.c(""),amendmentDate:new a.c(null),description:new a.c("",a.o.required),customerId:new a.c("",a.o.required),customerName:new a.c(""),consigneeId:new a.c(""),consigneeName:new a.c(""),projectStartDate:new a.c(null),projectStartDateString:new a.c(""),purchaseOrderNo:new a.c(""),purchaseOrderDate:new a.c(null),purchaseOrderDateString:new a.c(""),workOrderReference:new a.c(""),expectedDeliveryDate:new a.c(null,a.o.required),actualDeliveryDate:new a.c(null),expectedDeliveryDateString:new a.c(""),actualDeliveryDateString:new a.c(""),status:new a.c("",a.o.required),amount:new a.c(0),otherCharges:new a.c(0),cgstAmount:new a.c(0),sgstAmount:new a.c(0),totalAmount:new a.c(0),isActive:new a.c(""),details:new a.c(""),amendmentDateString:new a.c(""),notes:new a.c("")}),this.projectDetailForm=new a.e({projectId:new a.c(""),amendmentNo:new a.c(""),detailId:new a.c(""),rmId:new a.c("",a.o.required),rmName:new a.c(""),unitId:new a.c(""),unitName:new a.c("",a.o.required),quantity:new a.c(0,a.o.required),rate:new a.c(0),amount:new a.c(0)}),this.route.queryParams.subscribe(e=>{Object.keys(e).length>0&&this.projectService.findById(e.id,e.amendmentNo).subscribe(e=>{this.details=e.details,e.expectedDeliveryDate=this.convertToDate(e.expectedDeliveryDateString),e.actualDeliveryDate=this.convertToDate(e.actualDeliveryDateString),e.amendmentDate=this.convertToDate(e.amendmentDateString),e.projectStartDate=this.convertToDate(e.projectStartDateString),e.purchaseOrderDate=this.convertToDate(e.purchaseOrderDateString),this.projectForm.setValue(e),this.projectId=e.projectId})})}convertToDate(e){let t=null;return null!=e&&e.length>0&&(t=new Date(e)),t}onSubmit(){this.projectForm.valid&&(this.project=this.projectForm.value,this.project.details=this.details,null!=this.projectForm.value.isActive&&""!=this.projectForm.value.isActive||(this.project.isActive=!0),this.project.expectedDeliveryDateString=this.datePipe.transform(this.project.expectedDeliveryDate,"dd/MM/yyyy"),null!=this.projectForm.value.actualDeliveryDate&&(this.project.actualDeliveryDateString=this.datePipe.transform(this.project.actualDeliveryDate,"dd/MM/yyyy")),null!=this.projectForm.value.purchaseOrderDate&&(this.project.purchaseOrderDateString=this.datePipe.transform(this.project.purchaseOrderDate,"dd/MM/yyyy")),null!=this.projectForm.value.projectStartDate&&(this.project.projectStartDateString=this.datePipe.transform(this.project.projectStartDate,"dd/MM/yyyy")),null==this.projectForm.value.amendmentDate?(this.project.amendmentDateString=this.datePipe.transform(new Date,"dd/MM/yyyy"),this.project.amendmentNo=0):this.project.amendmentDateString=this.datePipe.transform(this.project.amendmentDate,"dd/MM/yyyy"),this.projectService.save(this.project).subscribe(e=>{this.notificationService.openSnackBar(e.message,e.status),console.log("success response ::"),console.log(e),this.projectForm.reset(),this.projectId="",this.details=[]},e=>{this.notificationService.openSnackBar(e.error.message,e.error.status),console.log("error response ::"),console.log(e.message)})),console.log(this.projectForm.value)}onDetailSubmit(e){if(this.projectDetailForm.valid){let t=this.projectDetailForm.value,i=t.projectId,r=-1;r=this.details.findIndex(null!=i&&i.length>0?e=>e.projectId==i:e=>e.rmId==t.rmId),console.log("last index >>"+r),-1!=r?(this.details[r]=this.projectDetailForm.value,this.notificationService.openSnackBar("Project details updated successfully","success")):(this.details.push(this.projectDetailForm.value),this.notificationService.openSnackBar("Project details added successfully","success")),this.calculateTotalDetailAmount(),this.projectDetailForm.reset(),e.hide()}else this.notificationService.openSnackBar("Error occurred, please review and submit again","danger")}calculateTotalDetailAmount(){let e=this.details.map(e=>e.amount).reduce((e,t)=>Number.parseFloat(e.toString())+Number.parseFloat(t.toString()),0);this.headerAmount=Number.parseFloat(e.toString()).toFixed(2),this.calculateFromGrid()}findAllProducts(){this.rawMaterialService.findAllProducts().subscribe(e=>{this.rawMaterials=e})}getCustomers(){this.clientService.findAll().subscribe(e=>{this.customers=e})}getConsignees(){this.clientService.findAll().subscribe(e=>{this.consignees=e})}getUnits(){this.unitService.getAllUnits().subscribe(e=>{this.units=e})}close(e){e.hide()}populateUnit(e){this.unitId=e.unit.unitId,this.unitName=e.unit.unitName,this.rmName=e.name}editDetail(e,t){this.projectDetailForm.setValue(e),t.show()}openDialog(e){this.dialog.open(c.a,{width:"250px",data:{header:"Confirm",content:"Are you sure to delete?"}}).afterClosed().subscribe(t=>{t&&this.deleteDetail(e)})}deleteDetail(e){let t=this.calculateDetailIndex(e);e.projectId?this.projectService.deleteDetail(e.projectId,e.amendmentNo,e.detailId).subscribe(e=>{this.details.splice(t,1),this.calculateTotalDetailAmount(),this.notificationService.openSnackBar(e.message,e.status)},e=>{this.notificationService.openSnackBar(e.error.message,e.error.status),console.log("error response ::"),console.log(e.message)}):-1!==t&&(this.details.splice(t,1),this.calculateTotalDetailAmount(),this.notificationService.openSnackBar("Order details removed successfully","success"))}calculateDetailIndex(e){let t=-1;return t=this.details.findIndex(null!=e.projectId&&e.projectId.length>0?t=>t.projectId==e.projectId:t=>t.rmId==e.rmId),t}calculateHeader(){this.calculate(this.projectForm.value.amount)}calculateFromGrid(){this.calculate(this.headerAmount)}calculate(e){let t=this.projectForm.value.otherCharges,i=0;Object(n.a)(e)&&(i+=Number.parseFloat(e.toString())),Object(n.a)(t)&&(i+=Number.parseFloat(t.toString())),this.cgstAmount=(9*i/100).toFixed(2),this.sgstAmount=(9*i/100).toFixed(2),this.totalAmount=(i+Number.parseFloat(this.cgstAmount)+Number.parseFloat(this.sgstAmount)).toFixed(2)}calculateDetail(){let e=this.projectDetailForm.value.quantity,t=this.projectDetailForm.value.rate;Object(n.a)(e)&&Object(n.a)(t)&&(this.detailAmount=(Number.parseFloat(t.toString())*Number.parseFloat(e.toString())).toFixed(2))}isMobileMenu(){return!($(window).width()>991)}modalWIdth(){return this.isMobileMenu()?"100%":"150%"}}return e.\u0275fac=function(t){return new(t||e)(l.Rb(p.a),l.Rb(b.a),l.Rb(u.a),l.Rb(m.a),l.Rb(h.a),l.Rb(f.b),l.Rb(o.a),l.Rb(r.d))},e.\u0275cmp=l.Lb({type:e,selectors:[["app-project"]],decls:170,vars:45,consts:[[1,"main-content"],[1,"container-fluid"],[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-header","card-header-success"],[1,"card-title"],["routerLink","/transaction/projects"],[1,"gridIcon"],[4,"ngIf"],[1,"card-body"],[3,"formGroup","ngSubmit"],["headerForm","ngForm"],[1,"col-md-3"],[1,"invisible","example-full-width"],["matInput","","placeholder","projectId","formControlName","projectId"],["matInput","","placeholder","amendmentNo","formControlName","amendmentNo"],["matInput","","placeholder","amendmentDate","formControlName","amendmentDate"],["matInput","","placeholder","isActive","formControlName","isActive"],[1,"example-full-width"],["matInput","","placeholder","Project Name","formControlName","description"],[1,"col-md-2"],["placeholder","Customer","formControlName","customerId"],[3,"value",4,"ngFor","ngForOf"],["placeholder","Consignee (If any)","formControlName","consigneeId"],["matInput","","placeholder","Purchase Order No","formControlName","purchaseOrderNo"],["matInput","","formControlName","purchaseOrderDate",3,"matDatepicker"],["matSuffix","",3,"for"],["picker1",""],["matInput","","placeholder","Offer Reference No","formControlName","workOrderReference"],["matInput","","formControlName","projectStartDate",3,"matDatepicker"],["picker2",""],["matInput","","formControlName","expectedDeliveryDate",3,"matDatepicker"],["picker3",""],["placeholder","Status","formControlName","status"],["matInput","","formControlName","actualDeliveryDate",3,"matDatepicker"],["picker4",""],["matInput","","placeholder","Amount","formControlName","amount",2,"text-align","right",3,"ngModel","readonly","ngModelChange","change"],["matInput","","placeholder","Other Charges (if any)","formControlName","otherCharges",2,"text-align","right",3,"change"],["matInput","","placeholder","CGST","formControlName","cgstAmount",2,"text-align","right",3,"readonly","ngModel","ngModelChange"],["matInput","","placeholder","SGST","formControlName","sgstAmount",2,"text-align","right",3,"readonly","ngModel","ngModelChange"],["matInput","","placeholder","Total Amount","formControlName","totalAmount",2,"text-align","right",3,"readonly","ngModel","ngModelChange"],[1,"card","card-plain"],[1,"card-header","card-header-info"],["width","100%"],["width","90%"],[2,"align-content","justify-content-right"],["type","button","mdbBtn","","color","unique","rounded","true","data-toggle","modal","data-target","#basicExample","mdbWavesEffect","",3,"click"],[1,"card-category"],[1,"table-responsive"],[1,"table","table-hover"],[1,"text-primary"],[4,"ngFor","ngForOf"],["mat-raised-button","","type","submit",1,"btn","btn-success","pull-right",3,"disabled","click"],[1,"clearfix"],["mdbModal","","id","frameModalTop","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade","left"],["frame","mdbModal"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header","text-center"],[1,"modal-title","w-100","font-weight-bold"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[3,"formGroup"],[1,"col-md-4"],["matInput","","placeholder","rmName","formControlName","rmName",3,"ngModel","ngModelChange"],["placeholder","Product","formControlName","rmId"],[3,"value","onSelectionChange",4,"ngFor","ngForOf"],["matInput","","placeholder","Unit","formControlName","unitId",3,"ngModel","ngModelChange"],["matInput","","placeholder","Unit","formControlName","unitName",3,"readonly","ngModel","ngModelChange"],["matInput","","placeholder","Quantity","formControlName","quantity",2,"text-align","right",3,"change"],["matInput","","placeholder","Rate","formControlName","rate",2,"text-align","right",3,"change"],["matInput","","placeholder","Amount","formControlName","amount",2,"text-align","right",3,"ngModel","readonly","ngModelChange"],[1,"modal-footer","d-flex","justify-content-right"],["mdbBtn","","color","deep-orange","mdbWavesEffect","",1,"waves-light",3,"click"],[3,"value"],["title","","data-toggle","tooltip","data-original-title","Edit",1,"edit",2,"cursor","pointer",3,"click"],[1,"routeIcon"],["title","","data-toggle","tooltip","data-original-title","Delete",1,"delete",2,"cursor","pointer",3,"click"],[3,"value","onSelectionChange"]],template:function(e,t){if(1&e){const e=l.Yb();l.Xb(0,"div",0),l.Xb(1,"div",1),l.Xb(2,"div",2),l.Xb(3,"div",3),l.Xb(4,"div",4),l.Xb(5,"div",5),l.Xb(6,"h4",6),l.Hc(7,"Create and Update Project Details "),l.Xb(8,"a",7),l.Xb(9,"mat-icon",8),l.Hc(10,"web"),l.Wb(),l.Wb(),l.Wb(),l.Gc(11,ee,3,1,"div",9),l.Gc(12,te,3,0,"div",9),l.Wb(),l.Xb(13,"div",10),l.Xb(14,"form",11,12),l.fc("ngSubmit",(function(){return t.onSubmit()})),l.Xb(16,"div",2),l.Xb(17,"div",13),l.Xb(18,"mat-form-field",14),l.Sb(19,"input",15),l.Sb(20,"input",16),l.Sb(21,"input",17),l.Sb(22,"input",18),l.Wb(),l.Xb(23,"mat-form-field",19),l.Sb(24,"input",20),l.Gc(25,ie,2,0,"mat-error",9),l.Wb(),l.Wb(),l.Xb(26,"div",21),l.Xb(27,"mat-form-field",19),l.Xb(28,"mat-select",22),l.Gc(29,re,2,2,"mat-option",23),l.Wb(),l.Gc(30,oe,2,0,"mat-error",9),l.Wb(),l.Wb(),l.Xb(31,"div",21),l.Xb(32,"mat-form-field",19),l.Xb(33,"mat-select",24),l.Gc(34,ae,2,2,"mat-option",23),l.Wb(),l.Wb(),l.Wb(),l.Xb(35,"div",13),l.Xb(36,"mat-form-field",19),l.Sb(37,"input",25),l.Gc(38,ne,2,0,"mat-error",9),l.Wb(),l.Wb(),l.Xb(39,"div",21),l.Xb(40,"mat-form-field"),l.Xb(41,"mat-label"),l.Hc(42,"Purchase Order Date"),l.Wb(),l.Sb(43,"input",26),l.Sb(44,"mat-datepicker-toggle",27),l.Sb(45,"mat-datepicker",null,28),l.Wb(),l.Wb(),l.Wb(),l.Xb(47,"div",2),l.Xb(48,"div",13),l.Xb(49,"mat-form-field",19),l.Sb(50,"input",29),l.Wb(),l.Wb(),l.Xb(51,"div",21),l.Xb(52,"mat-form-field"),l.Xb(53,"mat-label"),l.Hc(54,"Project Start Date"),l.Wb(),l.Sb(55,"input",30),l.Sb(56,"mat-datepicker-toggle",27),l.Sb(57,"mat-datepicker",null,31),l.Wb(),l.Wb(),l.Xb(59,"div",21),l.Xb(60,"mat-form-field"),l.Xb(61,"mat-label"),l.Hc(62,"PO Delivery Date"),l.Wb(),l.Sb(63,"input",32),l.Sb(64,"mat-datepicker-toggle",27),l.Sb(65,"mat-datepicker",null,33),l.Wb(),l.Wb(),l.Xb(67,"div",13),l.Xb(68,"mat-form-field",19),l.Xb(69,"mat-select",34),l.Gc(70,ce,2,2,"mat-option",23),l.Wb(),l.Wb(),l.Wb(),l.Xb(71,"div",21),l.Xb(72,"mat-form-field"),l.Xb(73,"mat-label"),l.Hc(74,"Actual Delivery Date"),l.Wb(),l.Sb(75,"input",35),l.Sb(76,"mat-datepicker-toggle",27),l.Sb(77,"mat-datepicker",null,36),l.Wb(),l.Wb(),l.Wb(),l.Xb(79,"div",2),l.Xb(80,"div",21),l.Xb(81,"mat-form-field",19),l.Xb(82,"input",37),l.fc("ngModelChange",(function(e){return t.headerAmount=e}))("change",(function(){return t.calculateHeader()})),l.Wb(),l.Gc(83,le,2,0,"mat-error",9),l.Wb(),l.Wb(),l.Xb(84,"div",21),l.Xb(85,"mat-form-field",19),l.Xb(86,"input",38),l.fc("change",(function(){return t.calculateHeader()})),l.Wb(),l.Wb(),l.Wb(),l.Xb(87,"div",21),l.Xb(88,"mat-form-field",19),l.Xb(89,"input",39),l.fc("ngModelChange",(function(e){return t.cgstAmount=e})),l.Wb(),l.Wb(),l.Wb(),l.Xb(90,"div",21),l.Xb(91,"mat-form-field",19),l.Xb(92,"input",40),l.fc("ngModelChange",(function(e){return t.sgstAmount=e})),l.Wb(),l.Wb(),l.Wb(),l.Xb(93,"div",21),l.Xb(94,"mat-form-field",19),l.Xb(95,"input",41),l.fc("ngModelChange",(function(e){return t.totalAmount=e})),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Xb(96,"div",2),l.Xb(97,"div",3),l.Xb(98,"div",42),l.Xb(99,"div",43),l.Xb(100,"table",44),l.Xb(101,"tr"),l.Xb(102,"td",45),l.Xb(103,"h4",6),l.Hc(104,"Project Dteails"),l.Wb(),l.Wb(),l.Xb(105,"td",46),l.Xb(106,"button",47),l.fc("click",(function(){return l.Ac(e),l.xc(128).show()})),l.Hc(107," Add "),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Sb(108,"p",48),l.Wb(),l.Xb(109,"div",10),l.Xb(110,"div",49),l.Xb(111,"table",50),l.Xb(112,"thead",51),l.Xb(113,"th"),l.Hc(114,"Product"),l.Wb(),l.Xb(115,"th"),l.Hc(116,"Quantity"),l.Wb(),l.Xb(117,"th"),l.Hc(118,"Unit"),l.Wb(),l.Gc(119,de,2,0,"th",9),l.Gc(120,se,2,0,"th",9),l.Xb(121,"th"),l.Hc(122,"Action"),l.Wb(),l.Wb(),l.Gc(123,me,17,5,"tbody",52),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Xb(124,"button",53),l.fc("click",(function(){return l.Ac(e),l.xc(15).ngSubmit.emit()})),l.Hc(125,"Save"),l.Wb(),l.Sb(126,"div",54),l.Xb(127,"div",55,56),l.Xb(129,"div",57),l.Xb(130,"div",58),l.Xb(131,"div",59),l.Xb(132,"h4",60),l.Hc(133,"Project Detail Entry"),l.Wb(),l.Xb(134,"button",61),l.fc("click",(function(){l.Ac(e);const i=l.xc(128);return t.close(i)})),l.Xb(135,"span",62),l.Hc(136,"\xd7"),l.Wb(),l.Wb(),l.Wb(),l.Xb(137,"div",10),l.Xb(138,"form",63),l.Xb(139,"div",2),l.Xb(140,"div",64),l.Xb(141,"mat-form-field",14),l.Sb(142,"input",15),l.Sb(143,"input",16),l.Xb(144,"input",65),l.fc("ngModelChange",(function(e){return t.rmName=e})),l.Wb(),l.Wb(),l.Xb(145,"mat-form-field",19),l.Xb(146,"mat-select",66),l.Gc(147,pe,2,2,"mat-option",67),l.Wb(),l.Gc(148,he,2,0,"mat-error",9),l.Wb(),l.Wb(),l.Xb(149,"div",21),l.Xb(150,"mat-form-field",14),l.Xb(151,"input",68),l.fc("ngModelChange",(function(e){return t.unitId=e})),l.Wb(),l.Wb(),l.Xb(152,"mat-form-field",19),l.Xb(153,"input",69),l.fc("ngModelChange",(function(e){return t.unitName=e})),l.Wb(),l.Gc(154,fe,2,0,"mat-error",9),l.Wb(),l.Wb(),l.Xb(155,"div",21),l.Xb(156,"mat-form-field",19),l.Xb(157,"input",70),l.fc("change",(function(){return t.calculateDetail()})),l.Wb(),l.Gc(158,ge,2,0,"mat-error",9),l.Wb(),l.Wb(),l.Xb(159,"div",21),l.Xb(160,"mat-form-field",19),l.Xb(161,"input",71),l.fc("change",(function(){return t.calculateDetail()})),l.Wb(),l.Gc(162,ve,2,0,"mat-error",9),l.Wb(),l.Wb(),l.Xb(163,"div",21),l.Xb(164,"mat-form-field",19),l.Xb(165,"input",72),l.fc("ngModelChange",(function(e){return t.detailAmount=e})),l.Wb(),l.Gc(166,We,2,0,"mat-error",9),l.Wb(),l.Wb(),l.Wb(),l.Xb(167,"div",73),l.Xb(168,"button",74),l.fc("click",(function(){l.Ac(e);const i=l.xc(128);return t.onDetailSubmit(i)})),l.Hc(169,"Save"),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb()}if(2&e){const e=l.xc(15),i=l.xc(46),r=l.xc(58),o=l.xc(66),a=l.xc(78);l.Cb(11),l.oc("ngIf",t.projectId),l.Cb(1),l.oc("ngIf",!t.projectId),l.Cb(2),l.oc("formGroup",t.projectForm),l.Cb(11),l.oc("ngIf",t.hasError("description","required")),l.Cb(4),l.oc("ngForOf",t.customers),l.Cb(1),l.oc("ngIf",t.hasError("customerId","required")),l.Cb(4),l.oc("ngForOf",t.consignees),l.Cb(4),l.oc("ngIf",t.hasError("purchaseOrderNo","required")),l.Cb(5),l.oc("matDatepicker",i),l.Cb(1),l.oc("for",i),l.Cb(11),l.oc("matDatepicker",r),l.Cb(1),l.oc("for",r),l.Cb(7),l.oc("matDatepicker",o),l.Cb(1),l.oc("for",o),l.Cb(6),l.oc("ngForOf",t.statusValues),l.Cb(5),l.oc("matDatepicker",a),l.Cb(1),l.oc("for",a),l.Cb(6),l.oc("ngModel",t.headerAmount)("readonly",!0),l.Cb(1),l.oc("ngIf",t.hasError("amount","required")),l.Cb(6),l.oc("readonly",!0)("ngModel",t.cgstAmount),l.Cb(3),l.oc("readonly",!0)("ngModel",t.sgstAmount),l.Cb(3),l.oc("readonly",!0)("ngModel",t.totalAmount),l.Cb(24),l.oc("ngIf",!t.isMobileMenu()),l.Cb(1),l.oc("ngIf",!t.isMobileMenu()),l.Cb(3),l.oc("ngForOf",t.details),l.Cb(1),l.oc("disabled",!e.form.valid),l.Cb(6),l.Fc("width",t.modalWIdth()),l.Cb(8),l.oc("formGroup",t.projectDetailForm),l.Cb(6),l.oc("ngModel",t.rmName),l.Cb(3),l.oc("ngForOf",t.rawMaterials),l.Cb(1),l.oc("ngIf",t.hasDetailError("rmId","required")),l.Cb(3),l.oc("ngModel",t.unitId),l.Cb(2),l.oc("readonly",!0)("ngModel",t.unitName),l.Cb(1),l.oc("ngIf",t.hasDetailError("unitName","required")),l.Cb(4),l.oc("ngIf",t.hasDetailError("quantity","required")),l.Cb(4),l.oc("ngIf",t.hasDetailError("rate","required")),l.Cb(3),l.oc("ngModel",t.detailAmount)("readonly",!0),l.Cb(1),l.oc("ngIf",t.hasDetailError("amount","required"))}},directives:[o.e,g.a,r.l,a.p,a.l,a.f,v.c,W.b,a.a,a.k,a.d,X.a,r.k,v.f,I.b,I.d,v.g,I.a,y.b,y.c,v.b,C.l],styles:[".gridIcon[_ngcontent-%COMP%]{vertical-align:middle;float:right}"]}),e})();function Ie(e,t){1&e&&(l.Xb(0,"th"),l.Hc(1,"Estimated delivery date"),l.Wb())}function ye(e,t){1&e&&(l.Xb(0,"th"),l.Hc(1,"Status"),l.Wb())}function Ce(e,t){if(1&e&&(l.Xb(0,"td"),l.Hc(1),l.Wb()),2&e){const e=l.ic().$implicit;l.Cb(1),l.Ic(e.expectedDeliveryDateString)}}function De(e,t){if(1&e&&(l.Xb(0,"td"),l.Hc(1),l.Wb()),2&e){const e=l.ic().$implicit;l.Cb(1),l.Ic(e.status)}}const Se=function(){return["/transaction/projects/edit"]},we=function(e,t){return{id:e,amendmentNo:t}};function Me(e,t){if(1&e){const e=l.Yb();l.Xb(0,"tbody"),l.Xb(1,"tr"),l.Xb(2,"td"),l.Hc(3),l.Wb(),l.Xb(4,"td"),l.Hc(5),l.Wb(),l.Xb(6,"td"),l.Hc(7),l.Wb(),l.Gc(8,Ce,2,1,"td",14),l.Gc(9,De,2,1,"td",14),l.Xb(10,"td"),l.Xb(11,"a",16),l.Xb(12,"mat-icon",17),l.Hc(13,"edit"),l.Wb(),l.Wb(),l.Xb(14,"a",18),l.fc("click",(function(){l.Ac(e);const i=t.$implicit;return l.ic().openDialog(i)})),l.Xb(15,"mat-icon",17),l.Hc(16,"delete"),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb()}if(2&e){const e=t.$implicit,i=l.ic();l.Cb(3),l.Ic(e.projectId),l.Cb(2),l.Ic(e.description),l.Cb(2),l.Ic(e.customerName),l.Cb(1),l.oc("ngIf",!i.isMobileMenu()),l.Cb(1),l.oc("ngIf",!i.isMobileMenu()),l.Cb(2),l.oc("routerLink",l.qc(7,Se))("queryParams",l.sc(8,we,e.projectId,e.amendmentNo))}}let He=(()=>{class e{constructor(e,t,i){this.projectService=e,this.notificationService=t,this.dialog=i,this.projects=[]}ngOnInit(){this.findAll()}findAll(){this.projectService.findAll().subscribe(e=>{this.projects=e})}delete(e){this.projectService.delete(e.projectId,e.amendmentNo).subscribe(e=>{console.log("Delete Response >>>>"),console.log(e),this.notificationService.openSnackBar(e.message,e.status),this.findAll()})}openDialog(e){this.dialog.open(c.a,{width:"250px",data:{header:"Confirm",content:"Are you sure to delete?"}}).afterClosed().subscribe(t=>{t&&this.delete(e)})}isMobileMenu(){return!($(window).width()>991)}}return e.\u0275fac=function(t){return new(t||e)(l.Rb(p.a),l.Rb(b.a),l.Rb(f.b))},e.\u0275cmp=l.Lb({type:e,selectors:[["app-project-show"]],decls:27,vars:3,consts:[[1,"main-content"],[1,"container-fluid"],[1,"row"],[1,"col-md-12"],[1,"card","card-plain"],[1,"card-header","card-header-info"],[1,"card-title"],["routerLink","/transaction/project/add"],[1,"gridIcon"],[1,"card-category"],[1,"card-body"],[1,"table-responsive"],[1,"table","table-hover"],[1,"text-primary"],[4,"ngIf"],[4,"ngFor","ngForOf"],["title","","data-toggle","tooltip","data-original-title","Edit",1,"edit",3,"routerLink","queryParams"],[1,"routeIcon"],["title","","data-toggle","tooltip","data-original-title","Delete",1,"delete",2,"cursor","pointer",3,"click"]],template:function(e,t){1&e&&(l.Xb(0,"div",0),l.Xb(1,"div",1),l.Xb(2,"div",2),l.Xb(3,"div",3),l.Xb(4,"div",4),l.Xb(5,"div",5),l.Xb(6,"h4",6),l.Hc(7,"Project details "),l.Xb(8,"a",7),l.Xb(9,"mat-icon",8),l.Hc(10,"add"),l.Wb(),l.Wb(),l.Wb(),l.Sb(11,"p",9),l.Wb(),l.Xb(12,"div",10),l.Xb(13,"div",11),l.Xb(14,"table",12),l.Xb(15,"thead",13),l.Xb(16,"th"),l.Hc(17,"Project Code"),l.Wb(),l.Xb(18,"th"),l.Hc(19,"Description"),l.Wb(),l.Xb(20,"th"),l.Hc(21,"Customer"),l.Wb(),l.Gc(22,Ie,2,0,"th",14),l.Gc(23,ye,2,0,"th",14),l.Xb(24,"th"),l.Hc(25,"Action"),l.Wb(),l.Wb(),l.Gc(26,Me,17,11,"tbody",15),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb()),2&e&&(l.Cb(22),l.oc("ngIf",!t.isMobileMenu()),l.Cb(1),l.oc("ngIf",!t.isMobileMenu()),l.Cb(3),l.oc("ngForOf",t.projects))},directives:[o.e,g.a,r.l,r.k],styles:[""]}),e})();class Fe{constructor(){this.details=[]}}class Ne{}function xe(e,t){return i=>{const r=i.controls[e],o=i.controls[t],a=r.value<=o.value;return!a&&r.valid&&o.valid?(r.setErrors({lessThanValue:e}),{lessThanValue:e+" should be less than "+t}):(a&&r.hasError("lessThanValue")&&r.setErrors(null),null)}}function ke(e){let t=null;return null!=e&&e.length>0&&(t=new Date(e)),t}let Ae=(()=>{class e{constructor(e){this.http=e}save(e){return this.http.post("transaction/delivery",e)}findAll(){return this.http.get("transaction/deliveries")}findById(e){return this.http.get("transaction/deliveries/find",{params:{id:e}})}delete(e){return this.http.delete("transaction/deliveries/delete",{params:{id:e}})}deleteDetail(e,t){let i=new d.d;return i=i.append("id",e),i=i.append("detailId",t.toString()),this.http.delete("transaction/deliveries/detail/delete",{params:i})}}return e.\u0275fac=function(t){return new(t||e)(l.bc(d.b))},e.\u0275prov=l.Nb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function je(e,t){if(1&e&&(l.Xb(0,"div"),l.Xb(1,"p",6),l.Hc(2),l.Wb(),l.Wb()),2&e){const e=l.ic();l.Cb(2),l.Jc("Delivery Id : ",e.deliveryId,"")}}function qe(e,t){1&e&&(l.Xb(0,"div"),l.Xb(1,"p",42),l.Hc(2,"Enter order delivery details for raw materials"),l.Wb(),l.Wb())}function Pe(e,t){if(1&e&&(l.Xb(0,"mat-option",70),l.Hc(1),l.Wb()),2&e){const e=t.$implicit;l.oc("value",e.orderId),l.Cb(1),l.Kc(" ",e.orderId," | ",e.supplierName," ")}}function Oe(e,t){1&e&&(l.Xb(0,"mat-error"),l.Hc(1,"order is required"),l.Wb())}function Ge(e,t){if(1&e&&(l.Xb(0,"mat-option",70),l.Hc(1),l.Wb()),2&e){const e=t.$implicit;l.oc("value",e.clientId),l.Cb(1),l.Jc(" ",e.clientName," ")}}function Ee(e,t){if(1&e&&(l.Xb(0,"mat-option",70),l.Hc(1),l.Wb()),2&e){const e=t.$implicit;l.oc("value",e.detailId),l.Cb(1),l.Jc(" ",e.identifier," ")}}function Re(e,t){1&e&&(l.Xb(0,"mat-error"),l.Hc(1,"Bill no is required"),l.Wb())}function Te(e,t){1&e&&(l.Xb(0,"mat-error"),l.Hc(1,"Amount is required "),l.Wb())}function Ue(e,t){if(1&e){const e=l.Yb();l.Xb(0,"tbody"),l.Xb(1,"tr"),l.Xb(2,"td"),l.Hc(3),l.Wb(),l.Xb(4,"td"),l.Hc(5),l.Wb(),l.Xb(6,"td"),l.Hc(7),l.Wb(),l.Xb(8,"td"),l.Hc(9),l.Wb(),l.Xb(10,"td"),l.Hc(11),l.Wb(),l.Xb(12,"td"),l.Xb(13,"a",71),l.fc("click",(function(){l.Ac(e);const i=t.$implicit,r=l.ic(),o=l.xc(104);return r.editDetail(i,o)})),l.Xb(14,"mat-icon",72),l.Hc(15,"edit"),l.Wb(),l.Wb(),l.Xb(16,"a",73),l.fc("click",(function(){l.Ac(e);const i=t.$implicit;return l.ic().openDialog(i)})),l.Xb(17,"mat-icon",72),l.Hc(18,"delete"),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb()}if(2&e){const e=t.$implicit;l.Cb(3),l.Ic(e.rmName),l.Cb(2),l.Ic(e.quantity),l.Cb(2),l.Ic(e.unitId),l.Cb(2),l.Ic(e.rate),l.Cb(2),l.Ic(e.amount)}}function Be(e,t){1&e&&(l.Xb(0,"mat-error"),l.Hc(1,"Unit is required "),l.Wb())}function $e(e,t){1&e&&(l.Xb(0,"mat-error"),l.Hc(1,"Quantity is required "),l.Wb())}function Qe(e,t){1&e&&(l.Xb(0,"mat-error"),l.Hc(1,"Quantity should be less than remaining quantity "),l.Wb())}function Le(e,t){1&e&&(l.Xb(0,"mat-error"),l.Hc(1,"Rate is required "),l.Wb())}function Ve(e,t){1&e&&(l.Xb(0,"mat-error"),l.Hc(1,"Amount is required "),l.Wb())}let Je=(()=>{class e{constructor(e,t,i,r,o,a,n,c){this.orderDeliveryService=e,this.orderPlacementService=t,this.notificationService=i,this.clientService=r,this.dialog=o,this.route=a,this.fb=n,this.datePipe=c,this.details=[],this.orders=[],this.workUnits=[{value:"DUMDUM",viewValue:"Dum dum unit"},{value:"SINGUR",viewValue:"Singur Unit"}],this.od=new Fe,this.consignees=[],this.consigneeDetails=[],this.hasError=(e,t)=>this.deliveryForm.controls[e].hasError(t),this.hasDetailError=(e,t)=>this.deliveryDetailsForm.controls[e].hasError(t)}ngOnInit(){this.getOrders(),this.getConsignees(),this.deliveryForm=new a.e({deliveryId:new a.c(""),billNo:new a.c("",a.o.required),billDate:new a.c(null,a.o.required),billDateString:new a.c(""),orderId:new a.c("",a.o.required),supplierId:new a.c(""),supplierName:new a.c(""),supplierIdentifier:new a.c(""),supplierDetailsId:new a.c(""),consigneeId:new a.c(""),consigneeName:new a.c(""),consigneeDetailsId:new a.c(""),consigneeIdentifier:new a.c(""),vehicleNo:new a.c(""),amount:new a.c(0),freightCharges:new a.c(0),cgstAmount:new a.c(0),sgstAmount:new a.c(0),totalAmount:new a.c(0),notes:new a.c(""),siteId:new a.c(""),isActive:new a.c(!0),details:new a.c(""),projectId:new a.c("")}),this.deliveryDetailsForm=this.fb.group({deliveryId:new a.c(""),detailId:new a.c(""),rmId:new a.c("",a.o.required),rmName:new a.c(""),unitId:new a.c(""),unitName:new a.c("",a.o.required),quantity:new a.c(0,[a.o.required]),rate:new a.c(0),amount:new a.c(0),remainingQuantity:new a.c(0),oldQuantity:new a.c(0)},{validator:xe("quantity","remainingQuantity")}),this.route.queryParams.subscribe(e=>{Object.keys(e).length>0&&this.orderDeliveryService.findById(e.id).subscribe(e=>{this.details=e.details,e.billDate=ke(e.billDateString),this.filterConsigneeDateils(e.consigneeId),this.deliveryId=e.deliveryId,this.deliveryForm.setValue(e)})})}onSubmit(){this.deliveryForm.valid&&(this.orderDelivery=this.deliveryForm.value,this.orderDelivery.details=this.details,null!=this.deliveryForm.value.isActive&&""!=this.deliveryForm.value.isActive||(this.orderDelivery.isActive=!0),null!=this.deliveryForm.value.billDate&&(this.orderDelivery.billDateString=this.datePipe.transform(this.orderDelivery.billDate,"dd/MM/yyyy")),this.orderDeliveryService.save(this.orderDelivery).subscribe(e=>{this.notificationService.openSnackBar(e.message,e.status),console.log("success response ::"),console.log(e),this.deliveryForm.reset(),this.details=[]},e=>{this.notificationService.openSnackBar(e.error.message,e.error.status),console.log("error response ::"),console.log(e.message)}))}onDetailSubmit(e){if(this.deliveryDetailsForm.valid){let t=this.deliveryDetailsForm.value,i=t.deliveryId,r=-1;r=this.details.findIndex(null!=i&&i.length>0?e=>e.deliveryId==i:e=>e.rmId==t.rmId),console.log("last index >>"+r),-1!=r?(this.details[r]=this.deliveryDetailsForm.value,this.notificationService.openSnackBar("Order details updated successfully","success")):(this.details.push(this.deliveryDetailsForm.value),this.notificationService.openSnackBar("Order details added successfully","success")),this.deliveryDetailsForm.reset(),this.headerAmount=this.calculateTotalDetailAmount(),this.calculate(this.headerAmount),e.hide()}else this.notificationService.openSnackBar("Error occurred, please review and submit again","danger")}close(e){e.hide()}editDetail(e,t){this.deliveryDetailsForm.patchValue(e),t.show()}openDialog(e){this.dialog.open(c.a,{width:"250px",data:{header:"Confirm",content:"Are you sure to delete?"}}).afterClosed().subscribe(t=>{t&&this.deleteDetail(e)})}deleteDetail(e){let t=this.calculateDetailIndex(e);e.detailId?this.orderDeliveryService.deleteDetail(e.deliveryId,e.detailId).subscribe(e=>{this.details.splice(t,1),this.notificationService.openSnackBar(e.message,e.status)},e=>{this.notificationService.openSnackBar(e.error.message,e.error.status),console.log("error response ::"),console.log(e.message)}):-1!==t&&(this.details.splice(t,1),this.notificationService.openSnackBar("Order details removed successfully","success"))}calculateDetailIndex(e){let t=-1;return t=this.details.findIndex(null!=e.detailId?t=>t.detailId==e.detailId:t=>t.rmId==e.rmId),t}calculateDetail(){let e=this.deliveryDetailsForm.value.quantity,t=this.deliveryDetailsForm.value.rate;Object(n.a)(e)&&Object(n.a)(t)&&(this.detailAmount=(Number.parseFloat(t.toString())*Number.parseFloat(e.toString())).toFixed(2))}getOrders(){this.orderPlacementService.findAll().subscribe(e=>{this.orders=e})}populatOrder(e){let t=e.value,i=this.orders.filter(e=>e.orderId===t)[0];this.populateOrderDelivery(i)}populateOrderDelivery(e){this.details=[],this.od.supplierId=e.supplierId,this.od.supplierName=e.supplierName,this.od.supplierDetailsId=e.supplierDetailsId,this.od.supplierIdentifier=e.identifier,this.od.siteId=e.siteId,this.od.projectId=e.projectId,e.details.forEach(e=>{let t=new Ne;t.rmId=e.rmId,t.rmName=e.rmName,t.unitId=e.unitId,t.unitName=e.unitName,t.quantity=e.remainingQuantity,t.remainingQuantity=e.remainingQuantity,t.rate=e.rate,t.amount=Number.parseFloat(e.remainingQuantity.toString())*Number.parseFloat(e.rate.toString()),this.details.push(t)}),this.headerAmount=this.calculateTotalDetailAmount(),this.calculate(this.headerAmount)}calculateTotalDetailAmount(){let e=this.details.map(e=>e.amount).reduce((e,t)=>Number.parseFloat(e.toString())+Number.parseFloat(t.toString()),0);return Number.parseFloat(e.toString()).toFixed(2)}getConsignees(){this.clientService.findAll().subscribe(e=>{this.consignees=e})}populateConsigneeDetails(e){this.filterConsigneeDateils(e.value)}filterConsigneeDateils(e){""!=e&&(this.consigneeDetails=this.consignees.filter(t=>t.clientId===e)[0].details)}calculateHeader(){this.calculate(this.deliveryForm.value.amount)}calculate(e){let t=this.deliveryForm.value.freightCharges,i=0;Object(n.a)(e)&&(i+=Number.parseFloat(e.toString())),Object(n.a)(t)&&(i+=Number.parseFloat(t.toString())),this.cgstAmount=(9*i/100).toFixed(2),this.sgstAmount=(9*i/100).toFixed(2),this.totalAmount=(i+Number.parseFloat(this.cgstAmount)+Number.parseFloat(this.sgstAmount)).toFixed(2)}isMobileMenu(){return!($(window).width()>991)}modalWIdth(){return this.isMobileMenu()?"100%":"150%"}}return e.\u0275fac=function(t){return new(t||e)(l.Rb(Ae),l.Rb(s),l.Rb(b.a),l.Rb(m.a),l.Rb(f.b),l.Rb(o.a),l.Rb(a.b),l.Rb(r.d))},e.\u0275cmp=l.Lb({type:e,selectors:[["app-order-delivery"]],decls:146,vars:41,consts:[[1,"main-content"],[1,"container-fluid"],[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-header","card-header-success"],[1,"card-title"],["routerLink","/transaction/deliveries"],[1,"gridIcon"],[4,"ngIf"],[1,"card-body"],[3,"formGroup","ngSubmit"],["headerForm","ngForm"],[1,"col-md-3"],[1,"invisible","example-full-width"],["matInput","","placeholder","deliveryId","formControlName","deliveryId"],["matInput","","placeholder","isActive","formControlName","isActive"],["matInput","","placeholder","supplierId","formControlName","supplierId",3,"ngModel","ngModelChange"],["matInput","","placeholder","supplierDetailsId","formControlName","supplierDetailsId",3,"ngModel","ngModelChange"],["matInput","","placeholder","siteId","formControlName","siteId",3,"ngModel","ngModelChange"],["matInput","","placeholder","projectId","formControlName","projectId",3,"ngModel","ngModelChange"],[1,"example-full-width"],["placeholder","Order","formControlName","orderId",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["matInput","","placeholder","Supplier","formControlName","supplierName",3,"readonly","ngModel","ngModelChange"],[1,"col-md-2"],["matInput","","placeholder","Supplier Address","formControlName","supplierIdentifier",3,"readonly","ngModel","ngModelChange"],["placeholder","Consignee","formControlName","consigneeId",3,"selectionChange"],["placeholder","Consignee Address","formControlName","consigneeDetailsId"],["matInput","","placeholder","Bill No","formControlName","billNo"],["matInput","","formControlName","billDate",3,"matDatepicker"],["matSuffix","",3,"for"],["picker1",""],["matInput","","placeholder","Amount","formControlName","amount",2,"text-align","right",3,"ngModel","readonly","ngModelChange","change"],["matInput","","placeholder","Freight Charges","formControlName","freightCharges",2,"text-align","right",3,"change"],["matInput","","placeholder","CGST","formControlName","cgstAmount",2,"text-align","right",3,"readonly","ngModel","ngModelChange"],["matInput","","placeholder","SGST","formControlName","sgstAmount",2,"text-align","right",3,"readonly","ngModel","ngModelChange"],["matInput","","placeholder","Total Amount","formControlName","totalAmount",2,"text-align","right",3,"readonly","ngModel","ngModelChange"],[1,"card-header","card-header-info"],["width","100%"],["width","90%"],[2,"align-content","justify-content-right"],[1,"card-category"],[1,"table-responsive"],[1,"table","table-hover"],[1,"text-primary"],[4,"ngFor","ngForOf"],["mat-raised-button","","type","submit",1,"btn","btn-success","pull-right",3,"disabled","click"],[1,"clearfix"],["mdbModal","","id","frameModalTop","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade","left"],["frame","mdbModal"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header","text-center"],[1,"modal-title","w-100","font-weight-bold"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[3,"formGroup"],[1,"col-md-4"],["matInput","","placeholder","rmId","formControlName","rmId"],["matInput","","placeholder","remainingQuantity","formControlName","remainingQuantity"],["matInput","","placeholder","oldQuantity","formControlName","oldQuantity"],["matInput","","placeholder","Raw Material","formControlName","rmName",3,"readonly"],["matInput","","placeholder","Unit","formControlName","unitId"],["matInput","","placeholder","Unit","formControlName","unitName",3,"readonly"],["matInput","","placeholder","Quantity","formControlName","quantity",2,"text-align","right",3,"change"],["matInput","","placeholder","Rate","formControlName","rate",2,"text-align","right",3,"change"],["matInput","","placeholder","Amount","formControlName","amount",2,"text-align","right",3,"ngModel","readonly","ngModelChange"],[1,"modal-footer","d-flex","justify-content-right"],["mdbBtn","","color","deep-orange","mdbWavesEffect","",1,"waves-light",3,"click"],[3,"value"],["title","","data-toggle","tooltip","data-original-title","Edit",1,"edit",2,"cursor","pointer",3,"click"],[1,"routeIcon"],["title","","data-toggle","tooltip","data-original-title","Delete",1,"delete",2,"cursor","pointer",3,"click"]],template:function(e,t){if(1&e){const e=l.Yb();l.Xb(0,"div",0),l.Xb(1,"div",1),l.Xb(2,"div",2),l.Xb(3,"div",3),l.Xb(4,"div",4),l.Xb(5,"div",5),l.Xb(6,"h4",6),l.Hc(7,"Raw material order delivery "),l.Xb(8,"a",7),l.Xb(9,"mat-icon",8),l.Hc(10,"web"),l.Wb(),l.Wb(),l.Wb(),l.Gc(11,je,3,1,"div",9),l.Gc(12,qe,3,0,"div",9),l.Wb(),l.Xb(13,"div",10),l.Xb(14,"form",11,12),l.fc("ngSubmit",(function(){return t.onSubmit()})),l.Xb(16,"div",2),l.Xb(17,"div",13),l.Xb(18,"mat-form-field",14),l.Sb(19,"input",15),l.Sb(20,"input",16),l.Xb(21,"input",17),l.fc("ngModelChange",(function(e){return t.od.supplierId=e})),l.Wb(),l.Xb(22,"input",18),l.fc("ngModelChange",(function(e){return t.od.supplierDetailsId=e})),l.Wb(),l.Xb(23,"input",19),l.fc("ngModelChange",(function(e){return t.od.siteId=e})),l.Wb(),l.Xb(24,"input",20),l.fc("ngModelChange",(function(e){return t.od.projectId=e})),l.Wb(),l.Wb(),l.Xb(25,"mat-form-field",21),l.Xb(26,"mat-select",22),l.fc("selectionChange",(function(e){return t.populatOrder(e)})),l.Gc(27,Pe,2,3,"mat-option",23),l.Wb(),l.Gc(28,Oe,2,0,"mat-error",9),l.Wb(),l.Wb(),l.Xb(29,"div",13),l.Xb(30,"mat-form-field",21),l.Xb(31,"input",24),l.fc("ngModelChange",(function(e){return t.od.supplierName=e})),l.Wb(),l.Wb(),l.Wb(),l.Xb(32,"div",25),l.Xb(33,"mat-form-field",21),l.Xb(34,"input",26),l.fc("ngModelChange",(function(e){return t.od.supplierIdentifier=e})),l.Wb(),l.Wb(),l.Wb(),l.Xb(35,"div",25),l.Xb(36,"mat-form-field",21),l.Xb(37,"mat-select",27),l.fc("selectionChange",(function(e){return t.populateConsigneeDetails(e)})),l.Gc(38,Ge,2,2,"mat-option",23),l.Wb(),l.Wb(),l.Wb(),l.Xb(39,"div",25),l.Xb(40,"mat-form-field",21),l.Xb(41,"mat-select",28),l.Gc(42,Ee,2,2,"mat-option",23),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Xb(43,"div",2),l.Xb(44,"div",25),l.Xb(45,"mat-form-field",21),l.Sb(46,"input",29),l.Gc(47,Re,2,0,"mat-error",9),l.Wb(),l.Wb(),l.Xb(48,"div",25),l.Xb(49,"mat-form-field"),l.Xb(50,"mat-label"),l.Hc(51,"Bill Date"),l.Wb(),l.Sb(52,"input",30),l.Sb(53,"mat-datepicker-toggle",31),l.Sb(54,"mat-datepicker",null,32),l.Wb(),l.Wb(),l.Xb(56,"div",25),l.Xb(57,"mat-form-field",21),l.Xb(58,"input",33),l.fc("ngModelChange",(function(e){return t.headerAmount=e}))("change",(function(){return t.calculateHeader()})),l.Wb(),l.Gc(59,Te,2,0,"mat-error",9),l.Wb(),l.Wb(),l.Xb(60,"div",25),l.Xb(61,"mat-form-field",21),l.Xb(62,"input",34),l.fc("change",(function(){return t.calculateHeader()})),l.Wb(),l.Wb(),l.Wb(),l.Xb(63,"div",25),l.Xb(64,"mat-form-field",21),l.Xb(65,"input",35),l.fc("ngModelChange",(function(e){return t.cgstAmount=e})),l.Wb(),l.Wb(),l.Wb(),l.Xb(66,"div",25),l.Xb(67,"mat-form-field",21),l.Xb(68,"input",36),l.fc("ngModelChange",(function(e){return t.sgstAmount=e})),l.Wb(),l.Wb(),l.Wb(),l.Xb(69,"div",25),l.Xb(70,"mat-form-field",21),l.Xb(71,"input",37),l.fc("ngModelChange",(function(e){return t.totalAmount=e})),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Xb(72,"div",2),l.Xb(73,"div",3),l.Xb(74,"div",4),l.Xb(75,"div",38),l.Xb(76,"table",39),l.Xb(77,"tr"),l.Xb(78,"td",40),l.Xb(79,"h4",6),l.Hc(80,"Order delivery details"),l.Wb(),l.Wb(),l.Sb(81,"td",41),l.Wb(),l.Wb(),l.Sb(82,"p",42),l.Wb(),l.Xb(83,"div",10),l.Xb(84,"div",43),l.Xb(85,"table",44),l.Xb(86,"thead",45),l.Xb(87,"th"),l.Hc(88,"Product"),l.Wb(),l.Xb(89,"th"),l.Hc(90,"Quantity"),l.Wb(),l.Xb(91,"th"),l.Hc(92,"Unit"),l.Wb(),l.Xb(93,"th"),l.Hc(94,"Rate"),l.Wb(),l.Xb(95,"th"),l.Hc(96,"Amount"),l.Wb(),l.Xb(97,"th"),l.Hc(98,"Action"),l.Wb(),l.Wb(),l.Gc(99,Ue,19,5,"tbody",46),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Xb(100,"button",47),l.fc("click",(function(){return l.Ac(e),l.xc(15).ngSubmit.emit()})),l.Hc(101,"Save"),l.Wb(),l.Sb(102,"div",48),l.Xb(103,"div",49,50),l.Xb(105,"div",51),l.Xb(106,"div",52),l.Xb(107,"div",53),l.Xb(108,"h4",54),l.Hc(109,"Project Detail Entry"),l.Wb(),l.Xb(110,"button",55),l.fc("click",(function(){l.Ac(e);const i=l.xc(104);return t.close(i)})),l.Xb(111,"span",56),l.Hc(112,"\xd7"),l.Wb(),l.Wb(),l.Wb(),l.Xb(113,"div",10),l.Xb(114,"form",57),l.Xb(115,"div",2),l.Xb(116,"div",58),l.Xb(117,"mat-form-field",14),l.Sb(118,"input",15),l.Sb(119,"input",59),l.Sb(120,"input",60),l.Sb(121,"input",61),l.Wb(),l.Xb(122,"mat-form-field",21),l.Sb(123,"input",62),l.Wb(),l.Wb(),l.Xb(124,"div",25),l.Xb(125,"mat-form-field",14),l.Sb(126,"input",63),l.Wb(),l.Xb(127,"mat-form-field",21),l.Sb(128,"input",64),l.Gc(129,Be,2,0,"mat-error",9),l.Wb(),l.Wb(),l.Xb(130,"div",25),l.Xb(131,"mat-form-field",21),l.Xb(132,"input",65),l.fc("change",(function(){return t.calculateDetail()})),l.Wb(),l.Gc(133,$e,2,0,"mat-error",9),l.Gc(134,Qe,2,0,"mat-error",9),l.Wb(),l.Wb(),l.Xb(135,"div",25),l.Xb(136,"mat-form-field",21),l.Xb(137,"input",66),l.fc("change",(function(){return t.calculateDetail()})),l.Wb(),l.Gc(138,Le,2,0,"mat-error",9),l.Wb(),l.Wb(),l.Xb(139,"div",25),l.Xb(140,"mat-form-field",21),l.Xb(141,"input",67),l.fc("ngModelChange",(function(e){return t.detailAmount=e})),l.Wb(),l.Gc(142,Ve,2,0,"mat-error",9),l.Wb(),l.Wb(),l.Wb(),l.Xb(143,"div",68),l.Xb(144,"button",69),l.fc("click",(function(){l.Ac(e);const i=l.xc(104);return t.onDetailSubmit(i)})),l.Hc(145,"Save"),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb()}if(2&e){const e=l.xc(15),i=l.xc(55);l.Cb(11),l.oc("ngIf",t.deliveryId),l.Cb(1),l.oc("ngIf",!t.deliveryId),l.Cb(2),l.oc("formGroup",t.deliveryForm),l.Cb(7),l.oc("ngModel",t.od.supplierId),l.Cb(1),l.oc("ngModel",t.od.supplierDetailsId),l.Cb(1),l.oc("ngModel",t.od.siteId),l.Cb(1),l.oc("ngModel",t.od.projectId),l.Cb(3),l.oc("ngForOf",t.orders),l.Cb(1),l.oc("ngIf",t.hasError("orderId","required")),l.Cb(3),l.oc("readonly",!0)("ngModel",t.od.supplierName),l.Cb(3),l.oc("readonly",!0)("ngModel",t.od.supplierIdentifier),l.Cb(4),l.oc("ngForOf",t.consignees),l.Cb(4),l.oc("ngForOf",t.consigneeDetails),l.Cb(5),l.oc("ngIf",t.hasError("billNo","required")),l.Cb(5),l.oc("matDatepicker",i),l.Cb(1),l.oc("for",i),l.Cb(5),l.oc("ngModel",t.headerAmount)("readonly",!0),l.Cb(1),l.oc("ngIf",t.hasError("amount","required")),l.Cb(6),l.oc("readonly",!0)("ngModel",t.cgstAmount),l.Cb(3),l.oc("readonly",!0)("ngModel",t.sgstAmount),l.Cb(3),l.oc("readonly",!0)("ngModel",t.totalAmount),l.Cb(28),l.oc("ngForOf",t.details),l.Cb(1),l.oc("disabled",!e.form.valid),l.Cb(6),l.Fc("width",t.modalWIdth()),l.Cb(8),l.oc("formGroup",t.deliveryDetailsForm),l.Cb(9),l.oc("readonly",!0),l.Cb(5),l.oc("readonly",!0),l.Cb(1),l.oc("ngIf",t.hasDetailError("unitName","required")),l.Cb(4),l.oc("ngIf",t.hasDetailError("quantity","required")),l.Cb(1),l.oc("ngIf",t.hasDetailError("quantity","lessThanValue")),l.Cb(4),l.oc("ngIf",t.hasDetailError("rate","required")),l.Cb(3),l.oc("ngModel",t.detailAmount)("readonly",!0),l.Cb(1),l.oc("ngIf",t.hasDetailError("amount","required"))}},directives:[o.e,g.a,r.l,a.p,a.l,a.f,v.c,W.b,a.a,a.k,a.d,X.a,r.k,v.f,I.b,I.d,v.g,I.a,y.c,y.b,C.l,v.b],styles:[""]}),e})();const Ye=function(){return["/transaction/order-delivery/edit"]},Ke=function(e){return{id:e}};function _e(e,t){if(1&e){const e=l.Yb();l.Xb(0,"tbody"),l.Xb(1,"tr"),l.Xb(2,"td"),l.Hc(3),l.Wb(),l.Xb(4,"td"),l.Hc(5),l.Wb(),l.Xb(6,"td"),l.Hc(7),l.Wb(),l.Xb(8,"td"),l.Hc(9),l.Wb(),l.Xb(10,"td"),l.Hc(11),l.Wb(),l.Xb(12,"td"),l.Xb(13,"a",15),l.Xb(14,"mat-icon",16),l.Hc(15,"edit"),l.Wb(),l.Wb(),l.Xb(16,"a",17),l.fc("click",(function(){l.Ac(e);const i=t.$implicit;return l.ic().openDialog(i)})),l.Xb(17,"mat-icon",16),l.Hc(18,"delete"),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb()}if(2&e){const e=t.$implicit;l.Cb(3),l.Ic(e.deliveryId),l.Cb(2),l.Ic(e.projectId),l.Cb(2),l.Ic(e.billNo),l.Cb(2),l.Ic(e.billDateString),l.Cb(2),l.Ic(e.supplierName),l.Cb(2),l.oc("routerLink",l.qc(7,Ye))("queryParams",l.rc(8,Ke,e.deliveryId))}}let ze=(()=>{class e{constructor(e,t,i){this.orderDeliveryService=e,this.notificationService=t,this.dialog=i,this.deliveries=[]}ngOnInit(){this.findAll()}findAll(){this.orderDeliveryService.findAll().subscribe(e=>{this.deliveries=e})}delete(e){this.orderDeliveryService.delete(e.deliveryId).subscribe(e=>{console.log("Delete Response >>>>"),console.log(e),this.notificationService.openSnackBar(e.message,e.status),this.findAll()})}openDialog(e){this.dialog.open(c.a,{width:"250px",data:{header:"Confirm",content:"Are you sure to delete?"}}).afterClosed().subscribe(t=>{t&&this.delete(e)})}isMobileMenu(){return!($(window).width()>991)}}return e.\u0275fac=function(t){return new(t||e)(l.Rb(Ae),l.Rb(b.a),l.Rb(f.b))},e.\u0275cmp=l.Lb({type:e,selectors:[["app-order-delivery-show"]],decls:29,vars:1,consts:[[1,"main-content"],[1,"container-fluid"],[1,"row"],[1,"col-md-12"],[1,"card","card-plain"],[1,"card-header","card-header-info"],[1,"card-title"],["routerLink","/transaction/order-delivery/add"],[1,"gridIcon"],[1,"card-category"],[1,"card-body"],[1,"table-responsive"],[1,"table","table-hover"],[1,"text-primary"],[4,"ngFor","ngForOf"],["title","","data-toggle","tooltip","data-original-title","Edit",1,"edit",3,"routerLink","queryParams"],[1,"routeIcon"],["title","","data-toggle","tooltip","data-original-title","Delete",1,"delete",2,"cursor","pointer",3,"click"]],template:function(e,t){1&e&&(l.Xb(0,"div",0),l.Xb(1,"div",1),l.Xb(2,"div",2),l.Xb(3,"div",3),l.Xb(4,"div",4),l.Xb(5,"div",5),l.Xb(6,"h4",6),l.Hc(7,"Purchase Order details "),l.Xb(8,"a",7),l.Xb(9,"mat-icon",8),l.Hc(10,"add"),l.Wb(),l.Wb(),l.Wb(),l.Sb(11,"p",9),l.Wb(),l.Xb(12,"div",10),l.Xb(13,"div",11),l.Xb(14,"table",12),l.Xb(15,"thead",13),l.Xb(16,"th"),l.Hc(17,"DL Code"),l.Wb(),l.Xb(18,"th"),l.Hc(19,"Project"),l.Wb(),l.Xb(20,"th"),l.Hc(21,"PO No."),l.Wb(),l.Xb(22,"th"),l.Hc(23,"PO Date"),l.Wb(),l.Xb(24,"th"),l.Hc(25,"Supplier"),l.Wb(),l.Xb(26,"th"),l.Hc(27,"Action"),l.Wb(),l.Wb(),l.Gc(28,_e,19,10,"tbody",14),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb()),2&e&&(l.Cb(28),l.oc("ngForOf",t.deliveries))},directives:[o.e,g.a,r.k],styles:[""]}),e})(),Ze=(()=>{class e{constructor(e){this.http=e}save(e){return this.http.post("transaction/process",e)}findAll(){return this.http.get("transaction/processes")}findById(e){return this.http.get("transaction/processes/find",{params:{id:e.toString()}})}delete(e){return this.http.delete("transaction/processes/delete",{params:{id:e.toString()}})}deleteDetail(e,t){let i=new d.d;return i=i.append("id",e.toString()),i=i.append("detailId",t.toString()),this.http.delete("transaction/processes/detail/delete",{params:i})}findMaterialsByProjectIdAndSiteId(e,t){let i=new d.d;return i=i.append("projectId",e),i=i.append("siteId",t),this.http.get("transaction/processes/materials",{params:i})}}return e.\u0275fac=function(t){return new(t||e)(l.bc(d.b))},e.\u0275prov=l.Nb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function et(e,t){if(1&e&&(l.Xb(0,"mat-option",58),l.Hc(1),l.Wb()),2&e){const e=t.$implicit;l.oc("value",e.value),l.Cb(1),l.Jc(" ",e.viewValue," ")}}function tt(e,t){1&e&&(l.Xb(0,"mat-error"),l.Hc(1,"Site Id is required"),l.Wb())}function it(e,t){1&e&&(l.Xb(0,"mat-error"),l.Hc(1,"Log date is required"),l.Wb())}function rt(e,t){if(1&e&&(l.Xb(0,"mat-option",58),l.Hc(1),l.Wb()),2&e){const e=t.$implicit;l.oc("value",e.projectId),l.Cb(1),l.Kc(" ",e.projectId," | ",e.description," ")}}function ot(e,t){1&e&&(l.Xb(0,"mat-error"),l.Hc(1,"Project is required"),l.Wb())}function at(e,t){if(1&e&&(l.Xb(0,"td"),l.Hc(1),l.Wb()),2&e){const e=l.ic().$implicit;l.Cb(1),l.Ic(e.availableQuantity)}}function nt(e,t){if(1&e&&(l.Xb(0,"td"),l.Hc(1),l.Wb()),2&e){const e=l.ic().$implicit;l.Cb(1),l.Ic(e.remainingQuantity)}}function ct(e,t){if(1&e){const e=l.Yb();l.Xb(0,"tbody"),l.Xb(1,"tr"),l.Xb(2,"td"),l.Hc(3),l.Wb(),l.Gc(4,at,2,1,"td",20),l.Gc(5,nt,2,1,"td",20),l.Xb(6,"td"),l.Hc(7),l.Wb(),l.Xb(8,"td"),l.Hc(9),l.Wb(),l.Xb(10,"td"),l.Hc(11),l.Wb(),l.Xb(12,"td"),l.Xb(13,"a",59),l.fc("click",(function(){l.Ac(e);const i=t.$implicit,r=l.ic(),o=l.xc(76);return r.editDetail(i,o)})),l.Xb(14,"mat-icon",60),l.Hc(15,"edit"),l.Wb(),l.Wb(),l.Xb(16,"a",61),l.fc("click",(function(){l.Ac(e);const i=t.$implicit;return l.ic().openDialog(i)})),l.Xb(17,"mat-icon",60),l.Hc(18,"delete"),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb()}if(2&e){const e=t.$implicit,i=l.ic();l.Cb(3),l.Ic(e.materialId),l.Cb(1),l.oc("ngIf",!i.isProductMat(e)),l.Cb(1),l.oc("ngIf",i.isProductMat(e)),l.Cb(2),l.Ic(e.materialUnitName),l.Cb(2),l.Ic(e.quantity),l.Cb(2),l.Ic(e.processType)}}function lt(e,t){if(1&e&&(l.Xb(0,"mat-option",58),l.Hc(1),l.Wb()),2&e){const e=t.$implicit;l.oc("value",e.code),l.Cb(1),l.Jc(" ",e.name," ")}}function dt(e,t){1&e&&(l.Xb(0,"mat-error"),l.Hc(1,"Material is required"),l.Wb())}function st(e,t){if(1&e){const e=l.Yb();l.Xb(0,"div",13),l.Xb(1,"mat-form-field",17),l.Xb(2,"input",62),l.fc("ngModelChange",(function(t){return l.Ac(e),l.ic().availableQuantity=t})),l.Wb(),l.Wb(),l.Wb()}if(2&e){const e=l.ic();l.Cb(2),l.oc("readonly",!0)("ngModel",e.availableQuantity)}}function bt(e,t){if(1&e){const e=l.Yb();l.Xb(0,"div",13),l.Xb(1,"mat-form-field",17),l.Xb(2,"input",63),l.fc("ngModelChange",(function(t){return l.Ac(e),l.ic().remainingQuantity=t})),l.Wb(),l.Wb(),l.Wb()}if(2&e){const e=l.ic();l.Cb(2),l.oc("readonly",!0)("ngModel",e.remainingQuantity)}}function ut(e,t){1&e&&(l.Xb(0,"mat-error"),l.Hc(1,"Quantity is required"),l.Wb())}function mt(e,t){if(1&e&&(l.Xb(0,"div",13),l.Xb(1,"mat-form-field",17),l.Sb(2,"input",64),l.Gc(3,ut,2,0,"mat-error",20),l.Wb(),l.Wb()),2&e){const e=l.ic();l.Cb(3),l.oc("ngIf",e.hasDetailError("quantity","required"))}}function pt(e,t){1&e&&(l.Xb(0,"mat-error"),l.Hc(1,"Quantity is required"),l.Wb())}function ht(e,t){1&e&&l.Sb(0,"mat-error")}function ft(e,t){if(1&e&&(l.Xb(0,"div",13),l.Xb(1,"mat-form-field",17),l.Sb(2,"input",64),l.Gc(3,pt,2,0,"mat-error",20),l.Gc(4,ht,1,0,"mat-error",20),l.Wb(),l.Wb()),2&e){const e=l.ic();l.Cb(3),l.oc("ngIf",e.hasDetailError("quantity","required")),l.Cb(1),l.oc("ngIf",e.hasDetailError("quantity","mandatoryAndlessThanValue"))}}function gt(e,t){if(1&e&&(l.Xb(0,"mat-option",58),l.Hc(1),l.Wb()),2&e){const e=t.$implicit;l.oc("value",e.value),l.Cb(1),l.Jc(" ",e.viewValue," ")}}function vt(e,t){1&e&&(l.Xb(0,"mat-error"),l.Hc(1,"Field value is required"),l.Wb())}function Wt(e,t){if(1&e&&(l.Xb(0,"div",13),l.Xb(1,"mat-form-field",17),l.Xb(2,"mat-select",65),l.Gc(3,gt,2,2,"mat-option",19),l.Wb(),l.Gc(4,vt,2,0,"mat-error",20),l.Wb(),l.Wb()),2&e){const e=l.ic();l.Cb(3),l.oc("ngForOf",e.inOutValues),l.Cb(1),l.oc("ngIf",e.hasDetailError("processType","required"))}}function Xt(e,t){if(1&e){const e=l.Yb();l.Xb(0,"div",13),l.Xb(1,"mat-form-field",17),l.Xb(2,"input",66),l.fc("ngModelChange",(function(t){return l.Ac(e),l.ic().processType=t})),l.Wb(),l.Wb(),l.Wb()}if(2&e){const e=l.ic();l.Cb(2),l.oc("readonly",!0)("ngModel",e.processType)}}let It=(()=>{class e{constructor(e,t,i,r,o,a,n){this.orderProcessingService=e,this.projectService=t,this.dialog=i,this.route=r,this.notificationService=o,this.fb=a,this.datePipe=n,this.details=[],this.projects=[],this.projectMaterialList=[],this.workUnits=[{value:"DUMDUM",viewValue:"Dum dum unit"},{value:"SINGUR",viewValue:"Singur Unit"}],this.inOutValues=[{value:"IN",viewValue:"In"},{value:"OUT",viewValue:"Out"}],this.hasError=(e,t)=>this.opForm.controls[e].hasError(t),this.hasDetailError=(e,t)=>this.opDetailsForm.controls[e].hasError(t)}ngOnInit(){this.getProjects(),this.opForm=this.fb.group({processId:new a.c(null),projectId:new a.c("",a.o.required),processDate:new a.c(null,a.o.required),processDateString:new a.c(""),notes:new a.c(""),siteId:new a.c(""),isActive:new a.c(!0),details:new a.c("")}),this.opDetailsForm=this.fb.group({processId:new a.c(null),processDetailsId:new a.c(null),processType:new a.c("",a.o.required),materialId:new a.c("",a.o.required),materialName:new a.c(""),materialUnit:new a.c("",a.o.required),materialUnitName:new a.c(""),quantity:new a.c(null,a.o.required),inOutFlag:new a.c(""),remainingQuantity:new a.c(0),availableQuantity:new a.c(0),notes:new a.c(""),materialType:new a.c("")},{validator:[e=>{const t=e.controls.quantity,i=e.controls.availableQuantity,r=e.controls.remainingQuantity,o=e.controls.materialType,a=e.controls.processType;if(t.valid&&i.valid&&r.valid&&o.valid&&a.valid){if("P"==o.value&&t.value>r.value){const e=t+" should be less than or equal to remaining quantity";return t.setErrors({mandatoryAndlessThanValue:t}),{mandatoryAndlessThanValue:e}}if("R"==o.value&&t.value>i.value){const e=t+" should be less than or equal to available quantity";return t.setErrors({mandatoryAndlessThanValue:t}),{mandatoryAndlessThanValue:e}}if("S"==o.value&&"OUT"==a.value&&t.value>i.value){const e=t+" should be less than or equal to available quantity";return t.setErrors({mandatoryAndlessThanValue:t}),{mandatoryAndlessThanValue:e}}}return t.hasError("mandatoryAndlessThanValue")&&t.setErrors(null),null}]}),this.route.queryParams.subscribe(e=>{Object.keys(e).length>0&&this.orderProcessingService.findById(e.id).subscribe(e=>{this.details=e.details,e.processDate=ke(e.processDateString),this.opForm.setValue(e)})})}onSubmit(){this.opForm.valid&&(this.orderProcessing=this.opForm.value,this.orderProcessing.details=this.details,null!=this.opForm.value.isActive&&""!=this.opForm.value.isActive||(this.orderProcessing.isActive=!0),null!=this.opForm.value.processDate&&(this.orderProcessing.processDateString=this.datePipe.transform(this.orderProcessing.processDate,"dd/MM/yyyy")),this.orderProcessingService.save(this.orderProcessing).subscribe(e=>{this.notificationService.openSnackBar(e.message,e.status),console.log("success response ::"),console.log(e),this.opForm.reset(),this.details=[]},e=>{this.notificationService.openSnackBar(e.error.message,e.error.status),console.log("error response ::"),console.log(e.message)}))}onDetailSubmit(e){if(this.opDetailsForm.valid){let t=this.opDetailsForm.value,i=t.processId,r=-1;r=this.details.findIndex(null!=i&&i>0?e=>e.processId==i:e=>e.materialId==t.materialId),console.log("last index >>"+r),-1!=r?(this.details[r]=this.opDetailsForm.value,this.notificationService.openSnackBar("Details updated successfully","success")):(this.details.push(this.opDetailsForm.value),this.notificationService.openSnackBar("Details added successfully","success")),this.opDetailsForm.reset(),e.hide()}else this.notificationService.openSnackBar("Error occurred, please review and submit again","danger")}close(e){e.hide()}editDetail(e,t){this.opDetailsForm.patchValue(e),t.show()}openDialog(e){this.dialog.open(c.a,{width:"250px",data:{header:"Confirm",content:"Are you sure to delete?"}}).afterClosed().subscribe(t=>{t&&this.deleteDetail(e)})}deleteDetail(e){let t=this.calculateDetailIndex(e);e.processDetailsId?this.orderProcessingService.deleteDetail(e.processId,e.processDetailsId).subscribe(e=>{this.details.splice(t,1),this.notificationService.openSnackBar(e.message,e.status)},e=>{this.notificationService.openSnackBar(e.error.message,e.error.status),console.log("error response ::"),console.log(e.message)}):-1!==t&&(this.details.splice(t,1),this.notificationService.openSnackBar("Details removed successfully","success"))}calculateDetailIndex(e){let t=-1;return t=this.details.findIndex(null!=e.processDetailsId?t=>t.processDetailsId==e.processDetailsId:t=>t.materialId==e.materialId),t}getProjects(){this.projectService.findAll().subscribe(e=>{this.projects=e})}populatDetailLists(e){this.orderProcessingService.findMaterialsByProjectIdAndSiteId(e.value,this.siteId).subscribe(e=>{this.projectMaterialList=e})}populateRow(e){let t=e.value,i=this.projectMaterialList.filter(e=>e.code==t)[0];this.materialId=i.code,this.materialName=i.name,this.materialType=i.type,this.materialUnit=i.unitId,this.materialUnitName=i.unitName,this.availableQuantity=i.availableQuantity,this.remainingQuantity=i.remainingQuantity,"P"==this.materialType&&(this.processType="IN"),"R"==this.materialType&&(this.processType="OUT")}isProduct(e){return"P"==e}isSemiProduct(e){return"S"==e}isProductMat(e){return"P"==e.materialType}isMobileMenu(){return!($(window).width()>991)}modalWIdth(){return this.isMobileMenu()?"100%":"150%"}}return e.\u0275fac=function(t){return new(t||e)(l.Rb(Ze),l.Rb(p.a),l.Rb(f.b),l.Rb(o.a),l.Rb(b.a),l.Rb(a.b),l.Rb(r.d))},e.\u0275cmp=l.Lb({type:e,selectors:[["app-order-processing"]],decls:111,vars:26,consts:[[1,"main-content"],[1,"container-fluid"],[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-header","card-header-success"],[1,"card-title"],["routerLink","/transaction/logs"],[1,"gridIcon"],[1,"card-category"],[1,"card-body"],[3,"formGroup","ngSubmit"],["headerForm","ngForm"],[1,"col-md-2"],[1,"invisible","example-full-width"],["matInput","","placeholder","processId","formControlName","processId"],["matInput","","placeholder","isActive","formControlName","isActive"],[1,"example-full-width"],["placeholder","Work Unit","formControlName","siteId",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["matInput","","formControlName","processDate",3,"matDatepicker"],["matSuffix","",3,"for"],["picker3",""],[1,"col-md-3"],["placeholder","Project","formControlName","projectId",3,"selectionChange"],[1,"col-md-5"],["matInput","","placeholder","Notes","formControlName","notes"],[1,"card","card-plain"],[1,"card-header","card-header-info"],["width","100%"],["width","90%"],[2,"align-content","justify-content-right"],["type","button","mdbBtn","","color","unique","rounded","true","data-toggle","modal","data-target","#basicExample","mdbWavesEffect","",3,"click"],[1,"table-responsive"],[1,"table","table-hover"],[1,"text-primary"],[4,"ngFor","ngForOf"],["mat-raised-button","","type","submit",1,"btn","btn-success","pull-right",3,"disabled","click"],[1,"clearfix"],["mdbModal","","id","frameModalTop","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade","left"],["frame","mdbModal"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header","text-center"],[1,"modal-title","w-100","font-weight-bold"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[3,"formGroup"],[1,"col-md-4"],["matInput","","placeholder","processDetailsId","formControlName","processDetailsId"],["matInput","","placeholder","materialType","formControlName","materialType",3,"ngModel","ngModelChange"],["placeholder","Material","formControlName","materialId",3,"selectionChange"],["matInput","","placeholder","Unit","formControlName","materialUnit",3,"ngModel","ngModelChange"],["matInput","","placeholder","Unit","formControlName","materialUnitName",3,"readonly","ngModel","ngModelChange"],["class","col-md-2",4,"ngIf"],[1,"modal-footer","d-flex","justify-content-right"],["mdbBtn","","color","deep-orange","mdbWavesEffect","",1,"waves-light",3,"click"],[3,"value"],["title","","data-toggle","tooltip","data-original-title","Edit",1,"edit",2,"cursor","pointer",3,"click"],[1,"routeIcon"],["title","","data-toggle","tooltip","data-original-title","Delete",1,"delete",2,"cursor","pointer",3,"click"],["matInput","","placeholder","Available Quantity","formControlName","availableQuantity",2,"text-align","right",3,"readonly","ngModel","ngModelChange"],["matInput","","placeholder","Remaining Quantity","formControlName","remainingQuantity",2,"text-align","right",3,"readonly","ngModel","ngModelChange"],["matInput","","placeholder","Quantity","formControlName","quantity",2,"text-align","right"],["placeholder","In/Out","formControlName","processType"],["matInput","","placeholder","In/Out","formControlName","processType",3,"readonly","ngModel","ngModelChange"]],template:function(e,t){if(1&e){const e=l.Yb();l.Xb(0,"div",0),l.Xb(1,"div",1),l.Xb(2,"div",2),l.Xb(3,"div",3),l.Xb(4,"div",4),l.Xb(5,"div",5),l.Xb(6,"h4",6),l.Hc(7,"Daily Work Log "),l.Xb(8,"a",7),l.Xb(9,"mat-icon",8),l.Hc(10,"web"),l.Wb(),l.Wb(),l.Wb(),l.Xb(11,"p",9),l.Hc(12,"Record daily activities here"),l.Wb(),l.Wb(),l.Xb(13,"div",10),l.Xb(14,"form",11,12),l.fc("ngSubmit",(function(){return t.onSubmit()})),l.Xb(16,"div",2),l.Xb(17,"div",13),l.Xb(18,"mat-form-field",14),l.Sb(19,"input",15),l.Sb(20,"input",16),l.Wb(),l.Xb(21,"mat-form-field",17),l.Xb(22,"mat-select",18),l.fc("ngModelChange",(function(e){return t.siteId=e})),l.Gc(23,et,2,2,"mat-option",19),l.Wb(),l.Gc(24,tt,2,0,"mat-error",20),l.Wb(),l.Wb(),l.Xb(25,"div",13),l.Xb(26,"mat-form-field"),l.Xb(27,"mat-label"),l.Hc(28,"Log Date"),l.Wb(),l.Sb(29,"input",21),l.Sb(30,"mat-datepicker-toggle",22),l.Sb(31,"mat-datepicker",null,23),l.Gc(33,it,2,0,"mat-error",20),l.Wb(),l.Wb(),l.Xb(34,"div",24),l.Xb(35,"mat-form-field",17),l.Xb(36,"mat-select",25),l.fc("selectionChange",(function(e){return t.populatDetailLists(e)})),l.Gc(37,rt,2,3,"mat-option",19),l.Wb(),l.Gc(38,ot,2,0,"mat-error",20),l.Wb(),l.Wb(),l.Xb(39,"div",26),l.Xb(40,"mat-form-field",17),l.Sb(41,"input",27),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Xb(42,"div",2),l.Xb(43,"div",3),l.Xb(44,"div",28),l.Xb(45,"div",29),l.Xb(46,"table",30),l.Xb(47,"tr"),l.Xb(48,"td",31),l.Xb(49,"h4",6),l.Hc(50,"Daily work log Dteails"),l.Wb(),l.Wb(),l.Xb(51,"td",32),l.Xb(52,"button",33),l.fc("click",(function(){return l.Ac(e),l.xc(76).show()})),l.Hc(53," Add "),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Sb(54,"p",9),l.Wb(),l.Xb(55,"div",10),l.Xb(56,"div",34),l.Xb(57,"table",35),l.Xb(58,"thead",36),l.Xb(59,"th"),l.Hc(60,"Material"),l.Wb(),l.Xb(61,"th"),l.Hc(62,"Available / Remaining Quantity"),l.Wb(),l.Xb(63,"th"),l.Hc(64,"Unit"),l.Wb(),l.Xb(65,"th"),l.Hc(66,"Processed Quantity"),l.Wb(),l.Xb(67,"th"),l.Hc(68,"Movement"),l.Wb(),l.Xb(69,"th"),l.Hc(70,"Action"),l.Wb(),l.Wb(),l.Gc(71,ct,19,6,"tbody",37),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Xb(72,"button",38),l.fc("click",(function(){return l.Ac(e),l.xc(15).ngSubmit.emit()})),l.Hc(73,"Save"),l.Wb(),l.Sb(74,"div",39),l.Xb(75,"div",40,41),l.Xb(77,"div",42),l.Xb(78,"div",43),l.Xb(79,"div",44),l.Xb(80,"h4",45),l.Hc(81,"Add/Update Work Log"),l.Wb(),l.Xb(82,"button",46),l.fc("click",(function(){l.Ac(e);const i=l.xc(76);return t.close(i)})),l.Xb(83,"span",47),l.Hc(84,"\xd7"),l.Wb(),l.Wb(),l.Wb(),l.Xb(85,"div",10),l.Xb(86,"form",48),l.Xb(87,"div",2),l.Xb(88,"div",49),l.Xb(89,"mat-form-field",14),l.Sb(90,"input",15),l.Sb(91,"input",50),l.Xb(92,"input",51),l.fc("ngModelChange",(function(e){return t.materialType=e})),l.Wb(),l.Wb(),l.Xb(93,"mat-form-field",17),l.Xb(94,"mat-select",52),l.fc("selectionChange",(function(e){return t.populateRow(e)})),l.Gc(95,lt,2,2,"mat-option",19),l.Wb(),l.Gc(96,dt,2,0,"mat-error",20),l.Wb(),l.Wb(),l.Xb(97,"div",13),l.Xb(98,"mat-form-field",14),l.Xb(99,"input",53),l.fc("ngModelChange",(function(e){return t.materialUnit=e})),l.Wb(),l.Wb(),l.Xb(100,"mat-form-field",17),l.Xb(101,"input",54),l.fc("ngModelChange",(function(e){return t.materialUnitName=e})),l.Wb(),l.Wb(),l.Wb(),l.Gc(102,st,3,2,"div",55),l.Gc(103,bt,3,2,"div",55),l.Gc(104,mt,4,1,"div",55),l.Gc(105,ft,5,2,"div",55),l.Gc(106,Wt,5,2,"div",55),l.Gc(107,Xt,3,2,"div",55),l.Wb(),l.Xb(108,"div",56),l.Xb(109,"button",57),l.fc("click",(function(){l.Ac(e);const i=l.xc(76);return t.onDetailSubmit(i)})),l.Hc(110,"Save"),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb()}if(2&e){const e=l.xc(15),i=l.xc(32);l.Cb(14),l.oc("formGroup",t.opForm),l.Cb(8),l.oc("ngModel",t.siteId),l.Cb(1),l.oc("ngForOf",t.workUnits),l.Cb(1),l.oc("ngIf",t.hasError("siteId","required")),l.Cb(5),l.oc("matDatepicker",i),l.Cb(1),l.oc("for",i),l.Cb(3),l.oc("ngIf",t.hasError("processDate","required")),l.Cb(4),l.oc("ngForOf",t.projects),l.Cb(1),l.oc("ngIf",t.hasError("projectId","required")),l.Cb(33),l.oc("ngForOf",t.details),l.Cb(1),l.oc("disabled",!e.form.valid),l.Cb(6),l.Fc("width",t.modalWIdth()),l.Cb(8),l.oc("formGroup",t.opDetailsForm),l.Cb(6),l.oc("ngModel",t.materialType),l.Cb(3),l.oc("ngForOf",t.projectMaterialList),l.Cb(1),l.oc("ngIf",t.hasDetailError("materialId","required")),l.Cb(3),l.oc("ngModel",t.materialUnit),l.Cb(2),l.oc("readonly",!0)("ngModel",t.materialUnitName),l.Cb(1),l.oc("ngIf",!t.isProduct(t.materialType)),l.Cb(1),l.oc("ngIf",t.isProduct(t.materialType)),l.Cb(1),l.oc("ngIf",t.isProduct(t.materialType)),l.Cb(1),l.oc("ngIf",!t.isProduct(t.materialType)),l.Cb(1),l.oc("ngIf",t.isSemiProduct(t.materialType)),l.Cb(1),l.oc("ngIf",!t.isSemiProduct(t.materialType))}},directives:[o.e,g.a,a.p,a.l,a.f,v.c,W.b,a.a,a.k,a.d,X.a,r.k,r.l,v.f,I.b,I.d,v.g,I.a,y.b,y.c,C.l,v.b],styles:[""]}),e})(),yt=(()=>{class e{constructor(e){this.http=e}findAllByDate(e){let t=new d.d;return t=t.set("logDate",e),this.http.get("transaction/processes/date",{params:t})}}return e.\u0275fac=function(t){return new(t||e)(l.bc(d.b))},e.\u0275prov=l.Nb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function Ct(e,t){1&e&&(l.Xb(0,"mat-error"),l.Hc(1,"Log date is required"),l.Wb())}function Dt(e,t){if(1&e&&(l.Xb(0,"tbody"),l.Xb(1,"tr"),l.Xb(2,"td"),l.Hc(3),l.Wb(),l.Xb(4,"td"),l.Hc(5),l.Wb(),l.Xb(6,"td"),l.Hc(7),l.Wb(),l.Xb(8,"td"),l.Hc(9),l.Wb(),l.Wb(),l.Wb()),2&e){const e=t.$implicit;l.Cb(3),l.Ic(e.materialName),l.Cb(2),l.Ic(e.materialUnit),l.Cb(2),l.Ic(e.quantity),l.Cb(2),l.Ic(e.processType)}}function St(e,t){if(1&e&&(l.Xb(0,"div",19),l.Xb(1,"p",20),l.Hc(2),l.Wb(),l.Xb(3,"table",21),l.Xb(4,"thead",22),l.Xb(5,"th"),l.Hc(6,"Item"),l.Wb(),l.Xb(7,"th"),l.Hc(8,"Unit"),l.Wb(),l.Xb(9,"th"),l.Hc(10,"Quantity"),l.Wb(),l.Xb(11,"th"),l.Hc(12,"In/Out"),l.Wb(),l.Wb(),l.Gc(13,Dt,10,4,"tbody",23),l.Wb(),l.Wb()),2&e){const e=t.$implicit;l.Cb(2),l.Jc("Project id : ",e.key,""),l.Cb(11),l.oc("ngForOf",e.value)}}let wt=(()=>{class e{constructor(e,t,i,r,o,a){this.orderProcessingService=e,this.notificationService=t,this.orderProcessingShowService=i,this.fb=r,this.dialog=o,this.datePipe=a,this.processes=[],this.hasError=(e,t)=>this.opForm.controls[e].hasError(t)}ngOnInit(){this.opForm=this.fb.group({processDate:new a.c(null,a.o.required),processDateString:new a.c("")})}findAll(){this.orderProcessingService.findAll().subscribe(e=>{this.processes=e})}onSubmit(){this.opForm.valid&&(this.processDate=this.opForm.value.processDate,null!=this.opForm.value.processDate&&(this.processDateString=this.datePipe.transform(this.processDate,"dd/MM/yyyy")),this.orderProcessingShowService.findAllByDate(this.processDateString).subscribe(e=>{this.works=e}),console.log(this.works))}}return e.\u0275fac=function(t){return new(t||e)(l.Rb(Ze),l.Rb(b.a),l.Rb(yt),l.Rb(a.b),l.Rb(f.b),l.Rb(r.d))},e.\u0275cmp=l.Lb({type:e,selectors:[["app-order-processing-show"]],decls:30,vars:8,consts:[[1,"main-content"],[1,"container-fluid"],[1,"row"],[1,"col-md-12"],[1,"card","card-plain"],[1,"card-header","card-header-info"],[1,"card-title"],["routerLink","/transaction/log/add"],[1,"gridIcon"],[1,"card-body"],[3,"formGroup","ngSubmit"],["headerForm","ngForm"],[1,"col-md-2"],["matInput","","formControlName","processDate",3,"matDatepicker"],["matSuffix","",3,"for"],["picker3",""],[4,"ngIf"],["mat-raised-button","","type","submit",1,"btn","btn-success","pull-right",3,"disabled","click"],["class","table-responsive",4,"ngFor","ngForOf"],[1,"table-responsive"],[1,"mat-card-title"],[1,"table","table-hover"],[1,"text-primary"],[4,"ngFor","ngForOf"]],template:function(e,t){if(1&e){const e=l.Yb();l.Xb(0,"div",0),l.Xb(1,"div",1),l.Xb(2,"div",2),l.Xb(3,"div",3),l.Xb(4,"div",4),l.Xb(5,"div",5),l.Xb(6,"h4",6),l.Hc(7,"Daily work log "),l.Xb(8,"a",7),l.Xb(9,"mat-icon",8),l.Hc(10,"add"),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Xb(11,"div",9),l.Xb(12,"form",10,11),l.fc("ngSubmit",(function(){return t.onSubmit()})),l.Xb(14,"div",2),l.Xb(15,"div",12),l.Xb(16,"mat-form-field"),l.Xb(17,"mat-label"),l.Hc(18,"Log Date"),l.Wb(),l.Sb(19,"input",13),l.Sb(20,"mat-datepicker-toggle",14),l.Sb(21,"mat-datepicker",null,15),l.Gc(23,Ct,2,0,"mat-error",16),l.Wb(),l.Wb(),l.Xb(24,"div",12),l.Xb(25,"button",17),l.fc("click",(function(){return l.Ac(e),l.xc(13).ngSubmit.emit()})),l.Hc(26,"Search"),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Xb(27,"div",9),l.Gc(28,St,14,2,"div",18),l.jc(29,"keyvalue"),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb()}if(2&e){const e=l.xc(13),i=l.xc(22);l.Cb(12),l.oc("formGroup",t.opForm),l.Cb(7),l.oc("matDatepicker",i),l.Cb(1),l.oc("for",i),l.Cb(3),l.oc("ngIf",t.hasError("processDate","required")),l.Cb(2),l.oc("disabled",!e.form.valid),l.Cb(3),l.oc("ngForOf",l.kc(29,6,t.works))}},directives:[o.e,g.a,a.p,a.l,a.f,v.c,v.f,W.b,a.a,I.b,a.k,a.d,I.d,v.g,I.a,r.l,r.k,v.b],pipes:[r.f],styles:[""]}),e})();var Mt=i("BPD/");let Ht=(()=>{class e{constructor(e,t){this.http=e,this.errorHandler=t}save(e){return this.http.post("transaction/expense",e)}findAll(){return this.http.get("transaction/expenses")}delete(e){return this.http.delete("transaction/expense/"+e)}findAllByDate(e){let t=new d.d;return t=t.set("expenseDate",e),this.http.get("transaction/expense/date",{params:t})}getAllExpenseCategories(){return this.http.get("transaction/categories")}findExpensesBetweenDates(e,t){let i=new d.d;return i=i.append("expenseDate",e),i=i.append("toDate",t),this.http.get("transaction/expense/report",{params:i})}}return e.\u0275fac=function(t){return new(t||e)(l.bc(d.b),l.bc(Mt.a))},e.\u0275prov=l.Nb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function Ft(e,t){if(1&e&&(l.Xb(0,"mat-option",29),l.Hc(1),l.Wb()),2&e){const e=t.$implicit;l.oc("value",e.categoryId),l.Cb(1),l.Jc(" ",e.categoryName," ")}}function Nt(e,t){1&e&&(l.Xb(0,"mat-error"),l.Hc(1,"Description is required"),l.Wb())}function xt(e,t){1&e&&(l.Xb(0,"mat-error"),l.Hc(1,"Amount is required "),l.Wb())}function kt(e,t){if(1&e&&(l.Xb(0,"tbody"),l.Xb(1,"tr"),l.Xb(2,"td"),l.Hc(3),l.Wb(),l.Xb(4,"td"),l.Hc(5),l.Wb(),l.Xb(6,"td"),l.Hc(7),l.Wb(),l.Xb(8,"td"),l.Hc(9),l.Wb(),l.Wb(),l.Wb()),2&e){const e=t.$implicit;l.Cb(3),l.Ic(e.expenseDateString),l.Cb(2),l.Ic(e.categoryName),l.Cb(2),l.Ic(e.description),l.Cb(2),l.Ic(e.amount)}}let At=(()=>{class e{constructor(e,t,i){this.expenseService=e,this.notificationService=t,this.datePipe=i,this.hasError=(e,t)=>this.exForm.controls[e].hasError(t)}ngOnInit(){this.getAllCategories(),this.exForm=new a.e({expenseDate:new a.c(null,a.o.required),expenseDateString:new a.c(""),description:new a.c("",a.o.required),amount:new a.c(0,a.o.required),categoryId:new a.c("",a.o.required)})}onSubmit(){this.exForm.valid&&(this.expense=this.exForm.value,console.log(this.expense),null!=this.exForm.value.expenseDate&&(this.expense.expenseDateString=this.datePipe.transform(this.expense.expenseDate,"dd/MM/yyyy")),this.expenseService.save(this.expense).subscribe(e=>{this.notificationService.openSnackBar(e.message,e.status),this.findAllByDate(this.expense.expenseDateString),this.exForm.value.description="",this.exForm.value.amount=0},e=>{this.notificationService.openSnackBar(e.error.message,e.error.status),console.log("error response ::"),console.log(e.message)}))}findAll(){this.expenseService.findAll().subscribe(e=>{this.expenses=e})}findAllByDate(e){this.expenseService.findAllByDate(e).subscribe(e=>{this.expenses=e})}getAllCategories(){this.expenseService.getAllExpenseCategories().subscribe(e=>{this.expenseCategories=e})}}return e.\u0275fac=function(t){return new(t||e)(l.Rb(Ht),l.Rb(b.a),l.Rb(r.d))},e.\u0275cmp=l.Lb({type:e,selectors:[["app-expense"]],decls:56,vars:7,consts:[[1,"main-content"],[1,"container-fluid"],[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-header","card-header-success"],[1,"card-title"],[1,"card-category"],[1,"card-body"],[3,"formGroup"],[1,"col-md-2"],["matInput","","formControlName","expenseDate",3,"matDatepicker"],["matSuffix","",3,"for"],["picker1",""],[1,"example-full-width"],["placeholder","Category","formControlName","categoryId"],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-3"],["matInput","","placeholder","Description","formControlName","description"],[4,"ngIf"],["matInput","","placeholder","Amount","formControlName","amount",2,"text-align","right"],["mat-raised-button","","type","submit",1,"btn","btn-success","pull-right",3,"click"],[1,"clearfix"],[1,"card","card-plain"],[1,"card-header","card-header-info"],[1,"table-responsive"],[1,"table","table-hover"],[1,"text-primary"],[4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){if(1&e&&(l.Xb(0,"div",0),l.Xb(1,"div",1),l.Xb(2,"div",2),l.Xb(3,"div",3),l.Xb(4,"div",4),l.Xb(5,"div",5),l.Xb(6,"h4",6),l.Hc(7,"Create Expense Record"),l.Wb(),l.Xb(8,"p",7),l.Hc(9,"Declere expenses here"),l.Wb(),l.Wb(),l.Xb(10,"div",8),l.Xb(11,"form",9),l.Xb(12,"div",2),l.Xb(13,"div",10),l.Xb(14,"mat-form-field"),l.Xb(15,"mat-label"),l.Hc(16,"Expense Date"),l.Wb(),l.Sb(17,"input",11),l.Sb(18,"mat-datepicker-toggle",12),l.Sb(19,"mat-datepicker",null,13),l.Wb(),l.Wb(),l.Xb(21,"div",10),l.Xb(22,"mat-form-field",14),l.Xb(23,"mat-select",15),l.Gc(24,Ft,2,2,"mat-option",16),l.Wb(),l.Wb(),l.Wb(),l.Xb(25,"div",17),l.Xb(26,"mat-form-field",14),l.Sb(27,"input",18),l.Gc(28,Nt,2,0,"mat-error",19),l.Wb(),l.Wb(),l.Xb(29,"div",10),l.Xb(30,"mat-form-field",14),l.Sb(31,"input",20),l.Gc(32,xt,2,0,"mat-error",19),l.Wb(),l.Wb(),l.Wb(),l.Xb(33,"button",21),l.fc("click",(function(){return t.onSubmit()})),l.Hc(34,"Save"),l.Wb(),l.Sb(35,"div",22),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Xb(36,"div",2),l.Xb(37,"div",3),l.Xb(38,"div",23),l.Xb(39,"div",24),l.Xb(40,"h4",6),l.Hc(41,"Expenses"),l.Wb(),l.Sb(42,"p",7),l.Wb(),l.Xb(43,"div",8),l.Xb(44,"div",25),l.Xb(45,"table",26),l.Xb(46,"thead",27),l.Xb(47,"th"),l.Hc(48,"Date"),l.Wb(),l.Xb(49,"th"),l.Hc(50,"Category"),l.Wb(),l.Xb(51,"th"),l.Hc(52,"Description"),l.Wb(),l.Xb(53,"th"),l.Hc(54,"Amount"),l.Wb(),l.Wb(),l.Gc(55,kt,10,4,"tbody",28),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb()),2&e){const e=l.xc(20);l.Cb(11),l.oc("formGroup",t.exForm),l.Cb(6),l.oc("matDatepicker",e),l.Cb(1),l.oc("for",e),l.Cb(6),l.oc("ngForOf",t.expenseCategories),l.Cb(4),l.oc("ngIf",t.hasError("description","required")),l.Cb(4),l.oc("ngIf",t.hasError("amount","required")),l.Cb(23),l.oc("ngForOf",t.expenses)}},directives:[a.p,a.l,a.f,v.c,v.f,W.b,a.a,I.b,a.k,a.d,I.d,v.g,I.a,X.a,r.k,r.l,C.l,v.b],styles:[""]}),e})();function jt(e,t){1&e&&(l.Xb(0,"mat-error"),l.Hc(1,"From date is required"),l.Wb())}function qt(e,t){if(1&e&&(l.Xb(0,"div",23),l.Xb(1,"table",24),l.Xb(2,"tbody"),l.Xb(3,"tr",20),l.Xb(4,"td",26),l.Xb(5,"b"),l.Hc(6),l.Wb(),l.Wb(),l.Xb(7,"td",27),l.Hc(8),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb()),2&e){const e=t.$implicit;l.Cb(6),l.Ic(e.key),l.Cb(2),l.Ic(e.value)}}function Pt(e,t){if(1&e&&(l.Xb(0,"tbody"),l.Xb(1,"tr"),l.Xb(2,"td"),l.Hc(3),l.Wb(),l.Xb(4,"td"),l.Hc(5),l.Wb(),l.Xb(6,"td"),l.Hc(7),l.Wb(),l.Xb(8,"td"),l.Hc(9),l.Wb(),l.Wb(),l.Wb()),2&e){const e=t.$implicit;l.Cb(3),l.Ic(e.expenseDateString),l.Cb(2),l.Ic(e.categoryName),l.Cb(2),l.Ic(e.description),l.Cb(2),l.Ic(e.amount)}}function Ot(e,t){if(1&e&&(l.Xb(0,"div"),l.Xb(1,"h4",20),l.Xb(2,"b"),l.Hc(3),l.Wb(),l.Wb(),l.Xb(4,"h4",20),l.Xb(5,"b"),l.Hc(6,"Expanse Summary :"),l.Wb(),l.Wb(),l.Xb(7,"div",21),l.Xb(8,"div",9),l.Gc(9,qt,9,2,"div",22),l.jc(10,"keyvalue"),l.Wb(),l.Wb(),l.Xb(11,"h4",20),l.Xb(12,"b"),l.Hc(13,"Expanse Details :"),l.Wb(),l.Wb(),l.Xb(14,"div",9),l.Xb(15,"div",23),l.Xb(16,"table",24),l.Xb(17,"thead",20),l.Xb(18,"th"),l.Hc(19,"Date"),l.Wb(),l.Xb(20,"th"),l.Hc(21,"Category"),l.Wb(),l.Xb(22,"th"),l.Hc(23,"Description"),l.Wb(),l.Xb(24,"th"),l.Hc(25,"Amount"),l.Wb(),l.Wb(),l.Gc(26,Pt,10,4,"tbody",25),l.Wb(),l.Wb(),l.Wb(),l.Wb()),2&e){const e=l.ic();l.Cb(3),l.Jc("Expanse during this date range : ",e.totalExpense,""),l.Cb(6),l.oc("ngForOf",l.kc(10,3,e.catagoriseExpenses)),l.Cb(17),l.oc("ngForOf",e.expenses)}}let Gt=(()=>{class e{constructor(e,t,i){this.fb=e,this.expenseService=t,this.datePipe=i,this.expenses=[],this.isSearched=!1,this.hasError=(e,t)=>this.expForm.controls[e].hasError(t)}ngOnInit(){this.expForm=this.fb.group({fromDate:new a.c(null,a.o.required),fromDateString:new a.c(""),toDate:new a.c(null),toDateString:new a.c("")})}onSubmit(){this.expForm.valid&&(this.fromDate=this.expForm.value.fromDate,this.toDate=this.expForm.value.toDate,null!=this.expForm.value.fromDate&&(this.fromDateString=this.datePipe.transform(this.fromDate,"dd/MM/yyyy")),null!=this.expForm.value.toDate&&(this.toDateString=this.datePipe.transform(this.toDate,"dd/MM/yyyy")),this.expenseService.findExpensesBetweenDates(this.fromDateString,this.toDateString).subscribe(e=>{this.summary=e,this.totalExpense=e.totalExpense,this.expenses=this.summary.details,this.catagoriseExpenses=this.summary.catagorisedExpenses}),console.log(this.expenses),this.isSearched=!0)}}return e.\u0275fac=function(t){return new(t||e)(l.Rb(a.b),l.Rb(Ht),l.Rb(r.d))},e.\u0275cmp=l.Lb({type:e,selectors:[["app-expense-show"]],decls:36,vars:8,consts:[[1,"main-content"],[1,"container-fluid"],[1,"row"],[1,"col-md-12"],[1,"card","card-plain"],[1,"card-header","card-header-info"],[1,"card-title"],["routerLink","/transaction/expense/add"],[1,"gridIcon"],[1,"card-body"],[3,"formGroup","ngSubmit"],["headerForm","ngForm"],[1,"col-md-2"],["matInput","","formControlName","fromDate",3,"matDatepicker"],["matSuffix","",3,"for"],["picker1",""],[4,"ngIf"],["matInput","","formControlName","toDate",3,"matDatepicker"],["picker2",""],["mat-raised-button","","type","submit",1,"btn","btn-success","pull-right",3,"disabled","click"],[1,"text-primary"],[1,"col-md-6"],["class","table-responsive",4,"ngFor","ngForOf"],[1,"table-responsive"],[1,"table","table-hover"],[4,"ngFor","ngForOf"],[1,"col"],[1,"col","text-right"]],template:function(e,t){if(1&e){const e=l.Yb();l.Xb(0,"div",0),l.Xb(1,"div",1),l.Xb(2,"div",2),l.Xb(3,"div",3),l.Xb(4,"div",4),l.Xb(5,"div",5),l.Xb(6,"h4",6),l.Hc(7,"Expense details "),l.Xb(8,"a",7),l.Xb(9,"mat-icon",8),l.Hc(10,"add"),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Xb(11,"div",9),l.Xb(12,"form",10,11),l.fc("ngSubmit",(function(){return t.onSubmit()})),l.Xb(14,"div",2),l.Xb(15,"div",12),l.Xb(16,"mat-form-field"),l.Xb(17,"mat-label"),l.Hc(18,"From Date/Expanse Date"),l.Wb(),l.Sb(19,"input",13),l.Sb(20,"mat-datepicker-toggle",14),l.Sb(21,"mat-datepicker",null,15),l.Gc(23,jt,2,0,"mat-error",16),l.Wb(),l.Wb(),l.Xb(24,"div",12),l.Xb(25,"mat-form-field"),l.Xb(26,"mat-label"),l.Hc(27,"To Date"),l.Wb(),l.Sb(28,"input",17),l.Sb(29,"mat-datepicker-toggle",14),l.Sb(30,"mat-datepicker",null,18),l.Wb(),l.Wb(),l.Xb(32,"div",12),l.Xb(33,"button",19),l.fc("click",(function(){return l.Ac(e),l.xc(13).ngSubmit.emit()})),l.Hc(34,"Search"),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Gc(35,Ot,27,5,"div",16),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb()}if(2&e){const e=l.xc(13),i=l.xc(22),r=l.xc(31);l.Cb(12),l.oc("formGroup",t.expForm),l.Cb(7),l.oc("matDatepicker",i),l.Cb(1),l.oc("for",i),l.Cb(3),l.oc("ngIf",t.hasError("fromDate","required")),l.Cb(5),l.oc("matDatepicker",r),l.Cb(1),l.oc("for",r),l.Cb(4),l.oc("disabled",!e.form.valid),l.Cb(2),l.oc("ngIf",t.isSearched)}},directives:[o.e,g.a,a.p,a.l,a.f,v.c,v.f,W.b,a.a,I.b,a.k,a.d,I.d,v.g,I.a,r.l,v.b,r.k],pipes:[r.f],styles:[""]}),e})(),Et=(()=>{class e{constructor(e){this.http=e}save(e){return this.http.post("transaction/despatch",e)}findAll(){return this.http.get("transaction/despatches")}findById(e){return this.http.get("transaction/despatch/find",{params:{id:e}})}delete(e){return this.http.delete("transaction/processes/delete",{params:{id:e.toString()}})}deleteDetail(e,t){let i=new d.d;return i=i.append("id",e),i=i.append("detailId",t.toString()),this.http.delete("transaction/despatches/detail/delete",{params:i})}findMaterialsByProjectIdAndSiteId(e,t){let i=new d.d;return i=i.append("projectId",e),i=i.append("siteId",t),this.http.get("transaction/despatches/materials",{params:i})}findByProjectId(e){let t=new d.d;return t=t.append("projectId",e),this.http.get("transaction/despatches/project",{params:t})}}return e.\u0275fac=function(t){return new(t||e)(l.bc(d.b))},e.\u0275prov=l.Nb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function Rt(e,t){if(1&e&&(l.Xb(0,"mat-option",58),l.Hc(1),l.Wb()),2&e){const e=t.$implicit;l.oc("value",e.value),l.Cb(1),l.Jc(" ",e.viewValue," ")}}function Tt(e,t){1&e&&(l.Xb(0,"mat-error"),l.Hc(1,"Site Id is required"),l.Wb())}function Ut(e,t){1&e&&(l.Xb(0,"mat-error"),l.Hc(1,"Despatch date is required"),l.Wb())}function Bt(e,t){if(1&e&&(l.Xb(0,"mat-option",58),l.Hc(1),l.Wb()),2&e){const e=t.$implicit;l.oc("value",e.projectId),l.Cb(1),l.Kc(" ",e.projectId," | ",e.description," ")}}function $t(e,t){1&e&&(l.Xb(0,"mat-error"),l.Hc(1,"Project is required"),l.Wb())}function Qt(e,t){1&e&&(l.Xb(0,"mat-error"),l.Hc(1,"Vehicle no is required"),l.Wb())}function Lt(e,t){if(1&e){const e=l.Yb();l.Xb(0,"tbody"),l.Xb(1,"tr"),l.Xb(2,"td"),l.Hc(3),l.Wb(),l.Xb(4,"td"),l.Hc(5),l.Wb(),l.Xb(6,"td"),l.Hc(7),l.Wb(),l.Xb(8,"td"),l.Hc(9),l.Wb(),l.Xb(10,"td"),l.Xb(11,"a",59),l.fc("click",(function(){l.Ac(e);const i=t.$implicit,r=l.ic(),o=l.xc(75);return r.editDetail(i,o)})),l.Xb(12,"mat-icon",60),l.Hc(13,"edit"),l.Wb(),l.Wb(),l.Xb(14,"a",61),l.fc("click",(function(){l.Ac(e);const i=t.$implicit;return l.ic().openDialog(i)})),l.Xb(15,"mat-icon",60),l.Hc(16,"delete"),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb()}if(2&e){const e=t.$implicit;l.Cb(3),l.Ic(e.materialName),l.Cb(2),l.Kc("",e.availableQuantity," ",e.materialUnitName,""),l.Cb(2),l.Kc("",e.quantity," ",e.materialUnitName,""),l.Cb(2),l.Ic(e.processType)}}function Vt(e,t){if(1&e&&(l.Xb(0,"mat-option",58),l.Hc(1),l.Wb()),2&e){const e=t.$implicit;l.oc("value",e.code),l.Cb(1),l.Jc(" ",e.name," ")}}function Jt(e,t){1&e&&(l.Xb(0,"mat-error"),l.Hc(1,"Material is required"),l.Wb())}function Yt(e,t){if(1&e){const e=l.Yb();l.Xb(0,"div",13),l.Xb(1,"mat-form-field",16),l.Xb(2,"input",62),l.fc("ngModelChange",(function(t){return l.Ac(e),l.ic().availableQuantity=t})),l.Wb(),l.Wb(),l.Wb()}if(2&e){const e=l.ic();l.Cb(2),l.oc("readonly",!0)("ngModel",e.availableQuantity)}}function Kt(e,t){1&e&&(l.Xb(0,"mat-error"),l.Hc(1,"Quantity is required"),l.Wb())}function _t(e,t){1&e&&l.Sb(0,"mat-error")}function zt(e,t){if(1&e&&(l.Xb(0,"div",13),l.Xb(1,"mat-form-field",16),l.Sb(2,"input",63),l.Gc(3,Kt,2,0,"mat-error",19),l.Gc(4,_t,1,0,"mat-error",19),l.Wb(),l.Wb()),2&e){const e=l.ic();l.Cb(3),l.oc("ngIf",e.hasDetailError("quantity","required")),l.Cb(1),l.oc("ngIf",e.hasDetailError("quantity","mandatoryAndlessThanValue"))}}function Zt(e,t){if(1&e&&(l.Xb(0,"mat-option",58),l.Hc(1),l.Wb()),2&e){const e=t.$implicit;l.oc("value",e.value),l.Cb(1),l.Jc(" ",e.viewValue," ")}}function ei(e,t){1&e&&(l.Xb(0,"mat-error"),l.Hc(1,"Field value is required"),l.Wb())}function ti(e,t){if(1&e&&(l.Xb(0,"div",13),l.Xb(1,"mat-form-field",16),l.Xb(2,"mat-select",64),l.Gc(3,Zt,2,2,"mat-option",18),l.Wb(),l.Gc(4,ei,2,0,"mat-error",19),l.Wb(),l.Wb()),2&e){const e=l.ic();l.Cb(3),l.oc("ngForOf",e.inOutValues),l.Cb(1),l.oc("ngIf",e.hasDetailError("processType","required"))}}function ii(e,t){if(1&e){const e=l.Yb();l.Xb(0,"div",13),l.Xb(1,"mat-form-field",16),l.Xb(2,"input",65),l.fc("ngModelChange",(function(t){return l.Ac(e),l.ic().despatchType=t})),l.Wb(),l.Wb(),l.Wb()}if(2&e){const e=l.ic();l.Cb(2),l.oc("readonly",!0)("ngModel",e.despatchType)}}let ri=(()=>{class e{constructor(e,t,i,r,o,a,n){this.orderDespatchService=e,this.projectService=t,this.dialog=i,this.route=r,this.notificationService=o,this.fb=a,this.datePipe=n,this.details=[],this.projects=[],this.projectMaterialList=[],this.workUnits=[{value:"DUMDUM",viewValue:"Dum dum unit"},{value:"SINGUR",viewValue:"Singur Unit"}],this.inOutValues=[{value:"IN",viewValue:"In"},{value:"OUT",viewValue:"Out"}],this.hasError=(e,t)=>this.odForm.controls[e].hasError(t),this.hasDetailError=(e,t)=>this.odDetailsForm.controls[e].hasError(t)}ngOnInit(){this.getProjects(),this.odForm=this.fb.group({despatchId:new a.c(null),projectId:new a.c("",a.o.required),despatchDate:new a.c(null,a.o.required),despatchDateString:new a.c(""),notes:new a.c(""),siteId:new a.c(""),vehicleNo:new a.c(""),details:new a.c("")}),this.odDetailsForm=this.fb.group({despatchId:new a.c(""),despatchDetailsId:new a.c(""),despatchType:new a.c("",a.o.required),materialId:new a.c("",a.o.required),materialName:new a.c(""),materialUnit:new a.c("",a.o.required),materialUnitName:new a.c(""),quantity:new a.c(null,a.o.required),availableQuantity:new a.c(0),materialType:new a.c(""),remainingQuantity:new a.c(0)},{validator:[xe("quantity","availableQuantity")]}),this.route.queryParams.subscribe(e=>{Object.keys(e).length>0&&this.orderDespatchService.findById(e.id).subscribe(e=>{this.details=e.details,e.despatchDate=ke(e.despatchDateString),this.odForm.setValue(e),this.orderDespatchService.findMaterialsByProjectIdAndSiteId(e.projectId,e.siteId).subscribe(e=>{this.projectMaterialList=e})})})}onSubmit(){this.odForm.valid&&(this.orderDespatch=this.odForm.value,this.orderDespatch.details=this.details,null!=this.odForm.value.despatchDate&&(this.orderDespatch.despatchDateString=this.datePipe.transform(this.orderDespatch.despatchDate,"dd/MM/yyyy")),this.orderDespatchService.save(this.orderDespatch).subscribe(e=>{this.notificationService.openSnackBar(e.message,e.status),console.log("success response ::"),console.log(e),this.odForm.reset(),this.details=[]},e=>{this.notificationService.openSnackBar(e.error.message,e.error.status),console.log("error response ::"),console.log(e.message)}))}onDetailSubmit(e){if(this.odDetailsForm.valid){let t=this.odDetailsForm.value,i=t.despatchId,r=-1;r=this.details.findIndex(null!=i?e=>e.despatchId==i:e=>e.materialId==t.materialId),console.log("last index >>"+r),-1!=r?(this.details[r]=this.odDetailsForm.value,this.notificationService.openSnackBar("Details updated successfully","success")):(this.details.push(this.odDetailsForm.value),this.notificationService.openSnackBar("Details added successfully","success")),this.odDetailsForm.reset(),e.hide()}else this.notificationService.openSnackBar("Error occurred, please review and submit again","danger")}close(e){this.odDetailsForm.reset(),e.hide()}editDetail(e,t){this.odDetailsForm.setValue(e),this.availableQuantity=e.availableQuantity,t.show()}openDialog(e){this.dialog.open(c.a,{width:"250px",data:{header:"Confirm",content:"Are you sure to delete?"}}).afterClosed().subscribe(t=>{t&&this.deleteDetail(e)})}deleteDetail(e){let t=this.calculateDetailIndex(e);e.despatchDetailsId?this.orderDespatchService.deleteDetail(e.despatchId,e.despatchDetailsId).subscribe(e=>{this.details.splice(t,1),this.notificationService.openSnackBar(e.message,e.status)},e=>{this.notificationService.openSnackBar(e.error.message,e.error.status),console.log("error response ::"),console.log(e.message)}):-1!==t&&(this.details.splice(t,1),this.notificationService.openSnackBar("Details removed successfully","success"))}calculateDetailIndex(e){let t=-1;return t=this.details.findIndex(null!=e.despatchDetailsId?t=>t.despatchDetailsId==e.despatchDetailsId:t=>t.materialId==e.materialId),t}getProjects(){this.projectService.findAll().subscribe(e=>{this.projects=e})}populatDetailLists(e){this.orderDespatchService.findMaterialsByProjectIdAndSiteId(e.value,this.siteId).subscribe(e=>{this.projectMaterialList=e})}populateRow(e){let t=e.value,i=this.projectMaterialList.filter(e=>e.code==t)[0];this.materialId=i.code,this.materialName=i.name,this.materialType=i.type,this.materialUnit=i.unitId,this.materialUnitName=i.unitName,this.availableQuantity=i.availableQuantity,this.despatchType="OUT"}isProduct(e){return"P"==e}isSemiProduct(e){return"S"==e}isProductMat(e){return"P"==e.materialType}isMobileMenu(){return!($(window).width()>991)}modalWIdth(){return this.isMobileMenu()?"100%":"150%"}}return e.\u0275fac=function(t){return new(t||e)(l.Rb(Et),l.Rb(p.a),l.Rb(f.b),l.Rb(o.a),l.Rb(b.a),l.Rb(a.b),l.Rb(r.d))},e.\u0275cmp=l.Lb({type:e,selectors:[["app-order-despatch"]],decls:109,vars:26,consts:[[1,"main-content"],[1,"container-fluid"],[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-header","card-header-success"],[1,"card-title"],["routerLink","/transaction/despatch"],[1,"gridIcon"],[1,"card-category"],[1,"card-body"],[3,"formGroup","ngSubmit"],["headerForm","ngForm"],[1,"col-md-2"],[1,"invisible","example-full-width"],["matInput","","placeholder","despatchId","formControlName","despatchId"],[1,"example-full-width"],["placeholder","Work Unit","formControlName","siteId",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["matInput","","formControlName","despatchDate",3,"matDatepicker"],["matSuffix","",3,"for"],["picker3",""],[1,"col-md-3"],["placeholder","Project","formControlName","projectId",3,"selectionChange"],["matInput","","placeholder","Vehicle No","formControlName","vehicleNo"],["matInput","","placeholder","Notes","formControlName","notes"],[1,"card","card-plain"],[1,"card-header","card-header-info"],["width","100%"],["width","90%"],[2,"align-content","justify-content-right"],["type","button","mdbBtn","","color","unique","rounded","true","data-toggle","modal","data-target","#basicExample","mdbWavesEffect","",3,"click"],[1,"table-responsive"],[1,"table","table-hover"],[1,"text-primary"],[4,"ngFor","ngForOf"],["mat-raised-button","","type","submit",1,"btn","btn-success","pull-right",3,"disabled","click"],[1,"clearfix"],["mdbModal","","id","frameModalTop","tabindex","-1","role","dialog","aria-labelledby","myModalLabel","aria-hidden","true",1,"modal","fade","left"],["frame","mdbModal"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header","text-center"],[1,"modal-title","w-100","font-weight-bold"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[3,"formGroup"],[1,"col-md-4"],["matInput","","placeholder","despatchDetailsId","formControlName","despatchDetailsId"],["matInput","","placeholder","materialType","formControlName","materialType",3,"ngModel","ngModelChange"],["matInput","","placeholder","materialName","formControlName","materialName",3,"ngModel","ngModelChange"],["placeholder","Material","formControlName","materialId",3,"selectionChange"],["matInput","","placeholder","Unit","formControlName","materialUnit",3,"ngModel","ngModelChange"],["matInput","","placeholder","Unit","formControlName","materialUnitName",3,"readonly","ngModel","ngModelChange"],["class","col-md-2",4,"ngIf"],[1,"modal-footer","d-flex","justify-content-right"],["mdbBtn","","color","deep-orange","mdbWavesEffect","",1,"waves-light",3,"click"],[3,"value"],["title","","data-toggle","tooltip","data-original-title","Edit",1,"edit",2,"cursor","pointer",3,"click"],[1,"routeIcon"],["title","","data-toggle","tooltip","data-original-title","Delete",1,"delete",2,"cursor","pointer",3,"click"],["matInput","","placeholder","Available Quantity","formControlName","availableQuantity",2,"text-align","right",3,"readonly","ngModel","ngModelChange"],["matInput","","placeholder","Quantity","formControlName","quantity",2,"text-align","right"],["placeholder","In/Out","formControlName","processType"],["matInput","","placeholder","In/Out","formControlName","despatchType",3,"readonly","ngModel","ngModelChange"]],template:function(e,t){if(1&e){const e=l.Yb();l.Xb(0,"div",0),l.Xb(1,"div",1),l.Xb(2,"div",2),l.Xb(3,"div",3),l.Xb(4,"div",4),l.Xb(5,"div",5),l.Xb(6,"h4",6),l.Hc(7,"Despatch "),l.Xb(8,"a",7),l.Xb(9,"mat-icon",8),l.Hc(10,"web"),l.Wb(),l.Wb(),l.Wb(),l.Xb(11,"p",9),l.Hc(12,"Record order despatch details here"),l.Wb(),l.Wb(),l.Xb(13,"div",10),l.Xb(14,"form",11,12),l.fc("ngSubmit",(function(){return t.onSubmit()})),l.Xb(16,"div",2),l.Xb(17,"div",13),l.Xb(18,"mat-form-field",14),l.Sb(19,"input",15),l.Wb(),l.Xb(20,"mat-form-field",16),l.Xb(21,"mat-select",17),l.fc("ngModelChange",(function(e){return t.siteId=e})),l.Gc(22,Rt,2,2,"mat-option",18),l.Wb(),l.Gc(23,Tt,2,0,"mat-error",19),l.Wb(),l.Wb(),l.Xb(24,"div",13),l.Xb(25,"mat-form-field"),l.Xb(26,"mat-label"),l.Hc(27,"Despatch Date"),l.Wb(),l.Sb(28,"input",20),l.Sb(29,"mat-datepicker-toggle",21),l.Sb(30,"mat-datepicker",null,22),l.Gc(32,Ut,2,0,"mat-error",19),l.Wb(),l.Wb(),l.Xb(33,"div",23),l.Xb(34,"mat-form-field",16),l.Xb(35,"mat-select",24),l.fc("selectionChange",(function(e){return t.populatDetailLists(e)})),l.Gc(36,Bt,2,3,"mat-option",18),l.Wb(),l.Gc(37,$t,2,0,"mat-error",19),l.Wb(),l.Wb(),l.Xb(38,"div",13),l.Xb(39,"mat-form-field"),l.Xb(40,"mat-label"),l.Hc(41,"Vehicle No"),l.Wb(),l.Sb(42,"input",25),l.Gc(43,Qt,2,0,"mat-error",19),l.Wb(),l.Wb(),l.Xb(44,"div",23),l.Xb(45,"mat-form-field",16),l.Sb(46,"input",26),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Xb(47,"div",2),l.Xb(48,"div",3),l.Xb(49,"div",27),l.Xb(50,"div",28),l.Xb(51,"table",29),l.Xb(52,"tr"),l.Xb(53,"td",30),l.Xb(54,"h4",6),l.Hc(55,"Daily work log Dteails"),l.Wb(),l.Wb(),l.Xb(56,"td",31),l.Xb(57,"button",32),l.fc("click",(function(){return l.Ac(e),l.xc(75).show()})),l.Hc(58," Add "),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Sb(59,"p",9),l.Wb(),l.Xb(60,"div",10),l.Xb(61,"div",33),l.Xb(62,"table",34),l.Xb(63,"thead",35),l.Xb(64,"th"),l.Hc(65,"Material"),l.Wb(),l.Xb(66,"th"),l.Hc(67,"Available Quantity"),l.Wb(),l.Xb(68,"th"),l.Hc(69,"Processed Quantity"),l.Wb(),l.Wb(),l.Gc(70,Lt,17,6,"tbody",36),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Xb(71,"button",37),l.fc("click",(function(){return l.Ac(e),l.xc(15).ngSubmit.emit()})),l.Hc(72,"Save"),l.Wb(),l.Sb(73,"div",38),l.Xb(74,"div",39,40),l.Xb(76,"div",41),l.Xb(77,"div",42),l.Xb(78,"div",43),l.Xb(79,"h4",44),l.Hc(80,"Add/Update Work Log"),l.Wb(),l.Xb(81,"button",45),l.fc("click",(function(){l.Ac(e);const i=l.xc(75);return t.close(i)})),l.Xb(82,"span",46),l.Hc(83,"\xd7"),l.Wb(),l.Wb(),l.Wb(),l.Xb(84,"div",10),l.Xb(85,"form",47),l.Xb(86,"div",2),l.Xb(87,"div",48),l.Xb(88,"mat-form-field",14),l.Sb(89,"input",15),l.Sb(90,"input",49),l.Xb(91,"input",50),l.fc("ngModelChange",(function(e){return t.materialType=e})),l.Wb(),l.Xb(92,"input",51),l.fc("ngModelChange",(function(e){return t.materialName=e})),l.Wb(),l.Wb(),l.Xb(93,"mat-form-field",16),l.Xb(94,"mat-select",52),l.fc("selectionChange",(function(e){return t.populateRow(e)})),l.Gc(95,Vt,2,2,"mat-option",18),l.Wb(),l.Gc(96,Jt,2,0,"mat-error",19),l.Wb(),l.Wb(),l.Xb(97,"div",13),l.Xb(98,"mat-form-field",14),l.Xb(99,"input",53),l.fc("ngModelChange",(function(e){return t.materialUnit=e})),l.Wb(),l.Wb(),l.Xb(100,"mat-form-field",16),l.Xb(101,"input",54),l.fc("ngModelChange",(function(e){return t.materialUnitName=e})),l.Wb(),l.Wb(),l.Wb(),l.Gc(102,Yt,3,2,"div",55),l.Gc(103,zt,5,2,"div",55),l.Gc(104,ti,5,2,"div",55),l.Gc(105,ii,3,2,"div",55),l.Wb(),l.Xb(106,"div",56),l.Xb(107,"button",57),l.fc("click",(function(){l.Ac(e);const i=l.xc(75);return t.onDetailSubmit(i)})),l.Hc(108,"Save"),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb()}if(2&e){const e=l.xc(15),i=l.xc(31);l.Cb(14),l.oc("formGroup",t.odForm),l.Cb(7),l.oc("ngModel",t.siteId),l.Cb(1),l.oc("ngForOf",t.workUnits),l.Cb(1),l.oc("ngIf",t.hasError("siteId","required")),l.Cb(5),l.oc("matDatepicker",i),l.Cb(1),l.oc("for",i),l.Cb(3),l.oc("ngIf",t.hasError("despatchDate","required")),l.Cb(4),l.oc("ngForOf",t.projects),l.Cb(1),l.oc("ngIf",t.hasError("projectId","required")),l.Cb(6),l.oc("ngIf",t.hasError("vehicleNo","required")),l.Cb(27),l.oc("ngForOf",t.details),l.Cb(1),l.oc("disabled",!e.form.valid),l.Cb(6),l.Fc("width",t.modalWIdth()),l.Cb(8),l.oc("formGroup",t.odDetailsForm),l.Cb(6),l.oc("ngModel",t.materialType),l.Cb(1),l.oc("ngModel",t.materialName),l.Cb(3),l.oc("ngForOf",t.projectMaterialList),l.Cb(1),l.oc("ngIf",t.hasDetailError("materialId","required")),l.Cb(3),l.oc("ngModel",t.materialUnit),l.Cb(2),l.oc("readonly",!0)("ngModel",t.materialUnitName),l.Cb(1),l.oc("ngIf",t.isProduct(t.materialType)),l.Cb(1),l.oc("ngIf",t.isProduct(t.materialType)),l.Cb(1),l.oc("ngIf",t.isSemiProduct(t.materialType)),l.Cb(1),l.oc("ngIf",!t.isSemiProduct(t.materialType))}},directives:[o.e,g.a,a.p,a.l,a.f,v.c,W.b,a.a,a.k,a.d,X.a,r.k,r.l,v.f,I.b,I.d,v.g,I.a,y.b,y.c,C.l,v.b],styles:[""]}),e})();function oi(e,t){if(1&e&&(l.Xb(0,"mat-option",20),l.Hc(1),l.Wb()),2&e){const e=t.$implicit;l.oc("value",e.projectId),l.Cb(1),l.Kc(" ",e.projectId," | ",e.description," ")}}const ai=function(){return["/transaction/despatch/edit"]},ni=function(e){return{id:e}};function ci(e,t){if(1&e&&(l.Xb(0,"tbody"),l.Xb(1,"tr"),l.Xb(2,"td"),l.Hc(3),l.Wb(),l.Xb(4,"td"),l.Hc(5),l.Wb(),l.Xb(6,"td"),l.Hc(7),l.Wb(),l.Xb(8,"td"),l.Hc(9),l.Wb(),l.Xb(10,"td"),l.Xb(11,"a",21),l.Xb(12,"mat-icon",22),l.Hc(13,"edit"),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb()),2&e){const e=t.$implicit;l.Cb(3),l.Ic(e.despatchId),l.Cb(2),l.Ic(e.despatchDateString),l.Cb(2),l.Ic(e.vehicleNo),l.Cb(2),l.Ic(e.notes),l.Cb(2),l.oc("routerLink",l.qc(6,ai))("queryParams",l.rc(7,ni,e.despatchId))}}const li=[{path:"order-placement/add",component:Q},{path:"orders/edit",component:Q},{path:"orders",component:Z},{path:"project/add",component:Xe},{path:"projects/edit",component:Xe},{path:"projects",component:He},{path:"order-delivery/add",component:Je},{path:"deliveries",component:ze},{path:"order-delivery/edit",component:Je},{path:"log/add",component:It},{path:"logs",component:wt},{path:"log/edit",component:It},{path:"expense/add",component:At},{path:"expenses",component:Gt},{path:"despatch/add",component:ri},{path:"despatches",component:(()=>{class e{constructor(e,t,i,r,o,a,n){this.orderDespatchService=e,this.projectService=t,this.dialog=i,this.route=r,this.notificationService=o,this.fb=a,this.datePipe=n,this.despatches=[],this.projects=[]}ngOnInit(){this.getProjects(),this.odForm=this.fb.group({projectId:new a.c("",a.o.required)})}getProjects(){this.projectService.findAll().subscribe(e=>{this.projects=e})}populatDetailLists(e){this.orderDespatchService.findByProjectId(e.value).subscribe(e=>{this.despatches=e})}onSubmit(){}}return e.\u0275fac=function(t){return new(t||e)(l.Rb(Et),l.Rb(p.a),l.Rb(f.b),l.Rb(o.a),l.Rb(b.a),l.Rb(a.b),l.Rb(r.d))},e.\u0275cmp=l.Lb({type:e,selectors:[["app-order-despatch-show"]],decls:32,vars:3,consts:[[1,"main-content"],[1,"container-fluid"],[1,"row"],[1,"col-md-12"],[1,"card","card-plain"],[1,"card-header","card-header-info"],[1,"card-title"],["routerLink","/transaction/despatch/add"],[1,"gridIcon"],[1,"card-body"],[3,"formGroup","ngSubmit"],["headerForm","ngForm"],[1,"col-md-3"],[1,"example-full-width"],["placeholder","Project","formControlName","projectId",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],[1,"table-responsive"],[1,"table","table-hover"],[1,"text-primary"],[4,"ngFor","ngForOf"],[3,"value"],["title","","data-toggle","tooltip","data-original-title","Edit",1,"edit",3,"routerLink","queryParams"],[1,"routeIcon"]],template:function(e,t){1&e&&(l.Xb(0,"div",0),l.Xb(1,"div",1),l.Xb(2,"div",2),l.Xb(3,"div",3),l.Xb(4,"div",4),l.Xb(5,"div",5),l.Xb(6,"h4",6),l.Hc(7,"Order Despatch Log "),l.Xb(8,"a",7),l.Xb(9,"mat-icon",8),l.Hc(10,"add"),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Xb(11,"div",9),l.Xb(12,"form",10,11),l.fc("ngSubmit",(function(){return t.onSubmit()})),l.Xb(14,"div",2),l.Xb(15,"div",12),l.Xb(16,"mat-form-field",13),l.Xb(17,"mat-select",14),l.fc("selectionChange",(function(e){return t.populatDetailLists(e)})),l.Gc(18,oi,2,3,"mat-option",15),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Xb(19,"div",9),l.Xb(20,"div",16),l.Xb(21,"table",17),l.Xb(22,"thead",18),l.Xb(23,"th"),l.Hc(24,"Id"),l.Wb(),l.Xb(25,"th"),l.Hc(26,"Date"),l.Wb(),l.Xb(27,"th"),l.Hc(28,"Vehicle No"),l.Wb(),l.Xb(29,"th"),l.Hc(30,"Notes"),l.Wb(),l.Wb(),l.Gc(31,ci,14,9,"tbody",19),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb(),l.Wb()),2&e&&(l.Cb(12),l.oc("formGroup",t.odForm),l.Cb(6),l.oc("ngForOf",t.projects),l.Cb(13),l.oc("ngForOf",t.despatches))},directives:[o.e,g.a,a.p,a.l,a.f,v.c,X.a,a.k,a.d,r.k,C.l],styles:[""]}),e})()},{path:"despatch/edit",component:ri}];let di=(()=>{class e{}return e.\u0275mod=l.Pb({type:e}),e.\u0275inj=l.Ob({factory:function(t){return new(t||e)},imports:[[o.f.forChild(li)],o.f]}),e})();var si=i("MutI"),bi=i("STbY"),ui=i("XhcP"),mi=i("dNgK"),pi=i("QibW"),hi=i("wZkO"),fi=i("+0xr"),gi=i("A5z7");let vi=(()=>{class e{}return e.\u0275mod=l.Pb({type:e}),e.\u0275inj=l.Ob({factory:function(t){return new(t||e)},imports:[[r.b,di,si.b,bi.a,g.b,W.c,ui.b,d.c,a.n,a.g,mi.c,pi.a,X.b,hi.a,f.f,fi.a,I.c,[y.d.forRoot()],y.f,y.e,y.a,C.j,C.q,gi.c]]}),e})()}}]);